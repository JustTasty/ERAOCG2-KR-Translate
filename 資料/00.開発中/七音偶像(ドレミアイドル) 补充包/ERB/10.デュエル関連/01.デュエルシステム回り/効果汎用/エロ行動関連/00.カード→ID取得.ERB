@CARD_EROTICS(卡片ID,决斗者,正規启动)
#DIMS DYNAMIC 决斗者
#DIM DYNAMIC 卡片ID
#DIM DYNAMIC 确认卡片ID
#DIM DYNAMIC 角色_ID
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 正規启动
VARSET RESULT

TRYCALLFORM CARD_{卡片ID}("另外的ID")
SIF RESULT > 0
	卡片ID = RESULT

SELECTCASE 卡片ID
	;水霊媒師エリア→憑依装着－エリア
	CASE 20400
		确认卡片ID = 1250
	;風霊媒師ウィン→憑依装着－ウィン
	CASE 20401
		确认卡片ID = 1251
	;화령媒師ヒータ→憑依装着－ヒータ
	CASE 20402
		确认卡片ID = 1252
	;지령媒師アウス→憑依装着－アウス
	CASE 20403
		确认卡片ID = 1253
	;광령媒師ライナ→憑依装着－ライナ
	CASE 20404
		确认卡片ID = 1254
	;암령媒師ダルク→憑依装着－ダルク
	CASE 20405
		确认卡片ID = 1255

	;サイマジ
	CASE 20030
		确认卡片ID = 1010

	;エリアル
	CASE 20180
		确认卡片ID = 1810
	;エミリア
	CASE 20181,50281,50681
		确认卡片ID = 1811
	;アバンス
	CASE 20182,50280
		确认卡片ID = 1813
	;シュリット
	CASE 51830
		确认卡片ID = 1835

	;섬도희－カガリ、섬도희－シズク、섬도희－하야테、섬도희－カイナ→섬도희－レイ
	CASE 42000 TO 42003, 202000
		确认卡片ID = 2000
	;A閃刀隷姫－レイ→섬도희－レイ
	CASE 39713
		确认卡片ID = 2000

	;エンプレス•オブ•エンディミオン→アルテミス
	CASE 2061
		确认卡片ID = 2049
	;サーヴァント•オブ•エンディミオン→ウィッチクラフト•ジェニー
	CASE 20062
		确认卡片ID = 2042

	;A閃刀隷姫－ロゼ、섬도희－ジーク→섬도희－ロゼ
	CASE 39714, 42004
		确认卡片ID = 2001
	;A섬도희－カメリア→섬도희－カメリア
	CASE 39712
		确认卡片ID = 2002
	;A섬도희－アザレア、A섬도희－アザレア•インダルジェンス→섬도희－アザレア
	CASE 39710, 39716
		确认卡片ID = 2003
	;ウィッチ•オブ•카오스→BMG
	CASE 41001, 41002, 20032
		确认卡片ID = 1000
	;The Evil★Twins！키스킬＆リィラ→키스킬＆リィラ
	CASE 42075
		RESULT:1 = NO_TO_CHARANUM(2075)
		RETURN NO_TO_CHARANUM(2076)
	;드래그마ーラのカーマ系→（ランダム）クエム、カルテシア
	CASE 39773, 59773, 159773
		 SELECTCASE RAND:2
			CASE 0
				确认卡片ID = 1882
			CASE 1
				确认卡片ID = 1883
		ENDSELECT
	;シスター•エリス
	CASE 39780
		确认卡片ID = 2100
	;シスター•ステラ
	CASE 39781
		确认卡片ID = 2101
	;シスター•ソフィア
	CASE 39782
		确认卡片ID = 2102
	;シスター•イレーヌ
	CASE 39783
		确认卡片ID = 2103
	;シスター•マルファ
	CASE 59780
		确认卡片ID = 2104
	;エリステラ→（ランダム）エリス、ステラ
	CASE 59781
		 SELECTCASE RAND:2
			CASE 0
				确认卡片ID = 2100
			CASEELSE
				确认卡片ID = 2101
		ENDSELECT
	;소피렌느→（ランダム）ソフィア、イレーヌ
	CASE 59782
		 SELECTCASE RAND:2
			CASE 0
				确认卡片ID = 2102
			CASEELSE
				确认卡片ID = 2103
		ENDSELECT
	;ロ-ズマリー
	CASE 39800
		确认卡片ID = 1390
	;ジャスミン
	CASE 39801
		确认卡片ID = 1391
	;マジョラム
	CASE 39802
		确认卡片ID = 1392
	;カナンガ
	CASE 39803
		确认卡片ID = 1393
	;ローリエ
	CASE 39804
		确认卡片ID = 1394
	;ロ-ズマリリス
	CASE 59801
		确认卡片ID = 1396
	;ロザリーナ
	CASE 39807
		确认卡片ID = 1397
	;マグノリア
	CASE 59800
		确认卡片ID = 1399
	;儚幻の花嫁リース→イヴリース
	CASE 52053
		确认卡片ID = 1872
	;ラッシーヴィア→セレトリーチェ•바르모니카
	CASE 59643
		确认卡片ID = 2140
	;ハスキー
	CASE 39785
		确认卡片ID = 2055
	;ティルル
	CASE 39786
		确认卡片ID = 2056
	;パルラ
	CASE 39787
		确认卡片ID = 2057
	;チェイム
	CASE 39788
		确认卡片ID = 2058
	;ナサリー
	CASE 39789
		确认卡片ID = 2059
	;ラドリー
	CASE 39790
		确认卡片ID = 2060
	;L키스킬
	CASE 59645
		确认卡片ID = 2077
	;Lリィラ
	CASE 59646
		确认卡片ID = 2078
	;마나둠•トリロスークタ
	CASE 54661
		确认卡片ID = 1950
	;No.29 マネキンキャット
	CASE 58029
		确认卡片ID = 1115
	;ケントレギナ
	CASE 59611
		确认卡片ID = 1326

	;블랙매지션걸.zin
	CASE 39820
		确认卡片ID = 1000
	;라뷰린스.zin
	CASE 39821
		确认卡片ID = 2110
	;マスカレーナ.zin
	CASE 39822
		确认卡片ID = 1335
	;レイちゃん.zin
	CASE 39823
		确认卡片ID = 2000
	;ガガガガール.zin
	CASE 39824
		确认卡片ID = 1110
	;刻まれし魔の크라이시스터
	CASE 59784
		确认卡片ID = 1446
	;수기사프리메라ビット
	CASE 59791
		确认卡片ID = 2130
	;魔기사トゥルーデア
	CASE 59792
		确认卡片ID = 2131
	;수기사アトリィザード
	CASE 59794
		确认卡片ID = 2132
	;影령수사－セフィラウェンディ
	CASE 33255
		确认卡片ID = 1821
	;倾世七音偶像•缪塞西娅
	CASE 12084
		确认卡片ID = 2093
	;倾世七音偶像•库莉娅
	CASE 12085
		确认卡片ID = 2085
	;多之七音偶像•丘蒂娅
	CASE 12086
		确认卡片ID = 2086
	;来之七音偶像•德莉米娅
	CASE 12087
		确认卡片ID = 2087
	;米之七音偶像•埃莉蒂娅
	CASE 12088
		确认卡片ID = 2088
	;发之七音偶像•凡西娅
	CASE 12089
		确认卡片ID = 2089
	;梭之七音偶像•格蕾西娅
	CASE 12090
		确认卡片ID = 2090
	;拉之七音偶像•安琪莉娅
	CASE 12091
		确认卡片ID = 2091
	;西之七音偶像•比蒂娅
	CASE 12092
		确认卡片ID = 2092

	CASE MASTER辅助, 9990
		确认卡片ID = MASTER
	CASE 对方玩家
		IF 决斗者 == "自己"
			RETURN OPPOSER
		ELSE
			RETURN MASTER
		ENDIF
		RETURN -1
	CASEELSE
		确认卡片ID = 卡片ID
ENDSELECT

VARSET 角色_ID, -1
FOR カウンタ,1,CHARANUM
	IF NO:カウンタ == 确认卡片ID
		角色_ID = カウンタ
		RETURN 角色_ID
	ENDIF
NEXT

IF 确认卡片ID > 10000 && 确认卡片ID < 19999
	FOR カウンタ,1,CHARANUM
		IF NO:カウンタ == (确认卡片ID - 10000)
			角色_ID = カウンタ
			RETURN 角色_ID
		ENDIF
	NEXT
ELSEIF 确认卡片ID > 40000 && 确认卡片ID < 49999
	FOR カウンタ,1,CHARANUM
		IF NO:カウンタ == (确认卡片ID - 40000)
			角色_ID = カウンタ
			RETURN 角色_ID
		ENDIF
	NEXT
ENDIF
RETURN -1



@FIND_OTHER_ID(角色_ID)
#DIMS DYNAMIC 决斗者
#DIM DYNAMIC 卡片ID
#DIM DYNAMIC 确认卡片ID
#DIM DYNAMIC 角色_ID
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 正規启动


卡片ID = NO:角色_ID + 10000
TRYCALLFORM CARDNAME_{卡片ID}, "名称"
SIF RESULTS == ""
	GOTO CHECK_2

CALL CARD_EROTICS(卡片ID)
SIF RESULT != 角色_ID
	GOTO CHECK_2

SIF ENUMFILES("RESOURCES/DUEL", @"{卡片ID}_DUEL.*")
	RETURN 卡片ID

$CHECK_2
卡片ID = NO:角色_ID + 40000
TRYCALLFORM CARDNAME_{卡片ID}, "名称"
SIF RESULTS == ""
	GOTO CHECK_3
CALL CARD_EROTICS(卡片ID)
SIF RESULT != 角色_ID
	GOTO CHECK_3
SIF ENUMFILES("RESOURCES/DUEL", @"{卡片ID}_DUEL.*")
	RETURN 卡片ID


$CHECK_3
FOR 卡片ID,10000,70000
	VARSET RESULTS
	TRYCALLFORM CARDNAME_{卡片ID}, "名称"
	SIF RESULTS == ""
		CONTINUE
	CALL CARD_EROTICS(卡片ID)
	SIF RESULT != 角色_ID
		CONTINUE
	IF ENUMFILES("RESOURCES/DUEL", @"{卡片ID}_DUEL.*")
		RETURN 卡片ID
	ENDIF
NEXT

RETURN -1