
@IRAI_DUEL_INTRO_398
#DIM DYNAMIC カウンタ
;듀얼前に「詰め플래그」に1を설정し、最初の5ドローをスキップ
;ターン跨いで処理したいので、듀얼が始まったら詰め플래그をリセット
詰め플래그 = 0

;詰め플래그でスキップしてしまった初期化
CALL CARD_LOADUP

;必要に応じて、ターンプレイヤーを변경(ここで자신にすると、상대のターンになる)
;ターンプレイヤー = 자신

;1以上の値を入れると、1한번만 ドローがスキップされる
SETVAR @"자신_ドロースキップ", 1
SETVAR @"상대_ドロースキップ", 1

;SETVAR @"자신_バトルスキップ", 1
SETVAR @"상대_メインスキップ", 1

;필드의 情報を설정
;SETVAR @"자신_魔_所有:2", 1;자신의 カード
;SETVAR @"자신_魔_表:2", 1;表
;SETVAR @"자신_마함:2",79555;호루스타인ミルクファーム

SETVAR @"상대_魔_所有:2", 1;상대のカード
SETVAR @"상대_魔_表:2", 1;表
SETVAR @"상대_마함:2",61251;빙의각성

SETVAR @"상대_MZ_所有:0", 2;상대のカード
SETVAR @"상대_MZ_表:0", 1;表
SETVAR @"상대_필드:0",20400;수령媒師エリア

SETVAR @"상대_MZ_所有:1", 2;상대のカード
SETVAR @"상대_MZ_表:1", 1;表
SETVAR @"상대_필드:1",20401;풍령媒師ウィン

SETVAR @"상대_MZ_所有:2", 2;상대のカード
SETVAR @"상대_MZ_表:2", 1;表
SETVAR @"상대_필드:2",20402;화령媒師ヒータ

SETVAR @"상대_MZ_所有:3", 2;상대のカード
SETVAR @"상대_MZ_表:3", 1;表
SETVAR @"상대_필드:3",20403;지령媒師アウス

SETVAR @"상대_MZ_所有:4", 2;상대のカード
SETVAR @"상대_MZ_表:4", 1;表
SETVAR @"상대_필드:4",20404;광령媒師ライナ

;자신의 패
SETVAR @"자신_손패:0", 2058;チェイム
SETVAR @"자신_손패:1", 99553;インポート
SETVAR @"자신_손패:2", 21141;アナザーベリル(손패コスト)

;자신의 덱
SETVAR @"자신_덱:0", 12056;フランメ
SETVAR @"자신_덱:1", 12057;ルフト
SETVAR @"자신_덱:2", 12058;シュテルン
SETVAR @"자신_덱:3", 12059;エルデ
SETVAR @"자신_덱:4", 12060;フルス
SETVAR @"자신_덱:5", 2056;ティルル
SETVAR @"자신_덱:6", 2057;パルラ
SETVAR @"자신_덱:7", 2059;ナサリー
SETVAR @"자신_덱:8", 2060;ラドリー
SETVAR @"자신_덱:9", 62055;お召し替え
SETVAR @"자신_덱:10",79555;호루스타인ミルクファーム
SETVAR @"자신_덱:11",79556;미유登録
SETVAR @"자신_덱:12",79557;애유登録
SETVAR @"자신_덱:13",79558;지유登録
SETVAR @"자신_덱:14",79559;EX유登録
SETVAR @"자신_덱:15",99554;암소착유(ドリップ)
SETVAR @"자신_덱:16",99555;암소풍유(インフレーション)

;자신의 EX덱
SETVAR @"자신_EX덱:0", 2055;ハスキー
SETVAR @"자신_EX덱:1", 2055;ハスキー
SETVAR @"자신_EX덱:2", 42055;シュトラール
SETVAR @"자신_EX덱:3", 42055;シュトラール
SETVAR @"자신_EX덱:4", 2061;ラティス
SETVAR @"자신_EX덱:5", 2061;ラティス

;자신의 묘지
;SETVAR @"자신_묘지:0", 23063;混沌の使者(エンドフェイズ時、빛속성と어둠속성を제외하고 패에 加える)
;SETVAR @"자신_묘지:1", 23982;어둠・サキュバスナイト
;SETVAR @"자신_묘지:2", 11607;光・クイーズナイト


;상대の손패
;SETVAR @"상대_손패:0", 70090;カウントダウン
;SETVAR @"상대_손패:1", 70090;カウントダウン
;SETVAR @"상대_손패:2", 70090;カウントダウン
;SETVAR @"상대_손패:3", 71006;突進

;상대の덱：引いても使えない札
SETVAR @"상대_덱:0", 41813;의식ガストクラーケ
SETVAR @"상대_덱:1", 41813
SETVAR @"상대_덱:2", 41813
SETVAR @"상대_덱:3", 41813

;勝利条件の설정、ここで詰めデュエルの勝利条件を설치할 수 있다。
@IRAI_DUEL_CONDVIC_398
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 듀얼進捗
#DIM DYNAMIC 現在値

VARSET RESULT

듀얼리스트 = 자신
対面者 = 상대

現在値 = GETVAR(@"%듀얼리스트%_薬Ｃ")
SIF INRANGE(現在値,0,1)
	現在値 = 2

듀얼進捗 = 1

;상대のメインフェイズ２になればクリア

SIF ターンプレイヤー == 対面者 && メインフェイズ２ == 1
	RETURN 1

;필드에 チェイム
듀얼進捗 ++
CALL FULLRESET
효과範囲필드 = 1
효과条件ID = 2058
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 미유
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 79556
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 ミルクファーム
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 79555
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 애유
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 79557
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 EX유
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 79559
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 지유
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 79558
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 インフレ
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 99555
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 일반 몬스터
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件종류 = 通常モン
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT >= 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 ドリップ
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 99554
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;묘지에 インフレあり
듀얼進捗 ++
CALL FULLRESET
효과範囲묘지 = 1
효과条件ID = 99555
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 アナザーベリルとチェイム
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID:0 = 21141
효과条件ID:1 = 2058
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT >= 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;盤面に호루스타인일반 몬스터が三体
듀얼進捗 ++
CALL FULLRESET
효과範囲필드 = 1
효과条件カテゴリ = 호루스타인
효과条件종류 = 通常モン
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT  == 3 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;盤面にEX유、かつメインフェイズ
듀얼進捗 ++
SIF メインフェイズ == 1 && GETVAR(@"%듀얼리스트%_MZ_ID:2") == 179559 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;EX유효과前
듀얼進捗 ++
SIF !발동済_1(듀얼리스트,179559) && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;패에 インフレ
듀얼進捗 ++
CALL FULLRESET
효과範囲손패 = 1
효과条件ID = 99555
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;상대에게 守備표시のモンスターが居ない
듀얼進捗 ++
CALL FULLRESET
효과範囲상대필드 = 1
효과条件표시 = 15
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 0 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;상대에게 守備표시のモンスターが居る
듀얼進捗 ++
CALL FULLRESET
효과範囲상대필드 = 1
효과条件표시 = 15
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;상대가 全て守備표시
듀얼進捗 ++
CALL FULLRESET
효과範囲상대필드 = 1
효과条件표시 = 15
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 5  && GETVAR(@"%듀얼리스트%_MZ_発情:2") != 100 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;EX유が発情=100
듀얼進捗 ++
SIF GETVAR(@"%듀얼리스트%_MZ_発情:2") == 100 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1


;EX발동済み
듀얼進捗 ++
SIF 발동済_1(듀얼리스트,79559) && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;상대ターン
듀얼進捗 ++
SIF ターンプレイヤー == 対面者 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;バトルフェイズ
듀얼進捗 ++
SIF バトルフェイズ == 1 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

;손패なし
듀얼進捗 ++
SIF 現손패(듀얼리스트) == 0 && INRANGE(現在値,듀얼進捗,듀얼進捗+1)
	RETURN 듀얼進捗 + 1

RETURN 現在値

;メッセージの설정
@IRAI_DUEL_MESSAGE_398(存在確認)
#DIM DYNAMIC 存在確認
#DIMS DYNAMIC 듀얼리스트
VARSET RESULT

듀얼리스트 = 자신

IF 存在確認 == 1
	RETURN 1
ENDIF

;リアクション
CALL IRAI_DUEL_CONDVIC_398

SELECTCASE RESULT

CASE 1
	;デュエルクリア！
	PRINTFORML お疲れ様！
	PRINTFORML 「勝利条件달성」を押せば終了するよ！

;1ターン目
CASE 2
	;初期표시
	PRINTFORML 今回は「호루스타인」카드를 フルに使い【EX유】の특수소환とサポートを行っていく。
	PRINTFORML これが最後の듀얼だ！【EX유】を使って、このターン中に상대のライフポイントを削り切ろう！
	PRINTFORML 
	PRINTFORML まずはチェイム소환して、패에 마법카드를 加えよう！
	PRINTFORML サーチした 카드는 「ミルクファーム」のコストに使用するよ。
	
CASE 3
	;필드에 チェイム
	PRINTFORML 필드의 チェイムをインポートで戻し、【미유】をサーチしよう。
	
CASE 4
	;패에 미유
	PRINTFORML 【미유】を발동し、『덱에서 「호루스타인─ミルクファーム」を패에 加える。』を選ぼう。
	PRINTFORML 
	PRINTFORML 【미유】の대상にするモンスターは、高ステータスの드래곤메이드モンスターがオススメだ。
	
CASE 5
	;패에 ミルクファーム
	PRINTFORML 「ミルクファーム」を발동し、마법を落として【애유】を패에 加えよう。
	
CASE 6
	;패에 애유
	PRINTFORML 【애유】を발동し、『덱에서 「호루스타인」通常마법を패에 加える。』を選ぼう！
	PRINTFORML 이 효과로 サーチするのは【EX유】にしよう。
	PRINTFORML 
	PRINTFORML 【애유】の대상にするモンスターは、ステータスを考えるならレベル4이하의 드래곤메이드몬스터를 選ぶと良いだろう。
	PRINTFORML 패의 「チェイム」は後でコストとして使用するので、덱の카드를 選択すること！
	
CASE 7
	;패에 EX유
	PRINTFORML 【EX유】を발동し、『덱에서 「호루스타인」카드를 패에 加える。』を選ぼう！
	PRINTFORML 이 효과로 サーチするのは【지유】にしよう。
	PRINTFORML 
	PRINTFORML EX유의 효과를 使用するなら、대상にするモンスターは好みで良いだろう。乳がデカくなって欲しい牝性몬스터를 選ぶと良い。
	PRINTFORML ただし、패의 「チェイム」は後でコストとして使用するので、덱の카드를 選択すること！
	
CASE 8
	;패에 지유
	PRINTFORML 【지유】を발동し、『덱에서 「호루스타인」함정카드를 패에 加える。』を選ぼう！
	PRINTFORML 이 효과로 サーチするのは「암소풍유(インフレーション)」にしよう。
	PRINTFORML 
	PRINTFORML 【지유】の대상にするなら守備力が1500に近い몬스터를 選ぶと良いだろう。
	PRINTFORML 패의 「チェイム」は後でコストとして使用するので、덱の카드를 選択すること！
	
CASE 9
	;패에 インフレ
	PRINTFORML 「ミルクファーム」を발동し、「インフレ」を落として「암소착유(ドリップ)」を패에 加えよう。
	PRINTFORML 
	PRINTFORML フィールド・묘지에 야수족の일반 몬스터が存在する경우、「インフレ」は１턴에 １한번만 묘지から回収할 수 있다。
	PRINTFORML 「ミルクファーム」が張ってあるときは積極的にコストにしてしまおう。
	
CASE 10
	;패에 일반 몬스터あり
	PRINTFORML 「ミルクファーム」を발동し、패의 【미유】【애유】【지유】を묘지에 落とそう。
	PRINTFORML 
	PRINTFORML ※「ミルクファーム」では묘지の몬스터밖에 특수 소환할 수 없다。패의 「호루스타인」モンスターは소환権が残って無ければ묘지로 보내고 しまおう。
	
CASE 11
	;패에 ドリップ
	PRINTFORML 패의 「ドリップ」を발동し、묘지の「호루스타인」몬스터를 蘇生しよう。
	
CASE 12
	;묘지에 インフレあり
	PRINTFORML 묘지の「インフレ」의 효과를 발동して패에 戻そう。
	PRINTFORML 
	PRINTFORML 「インフレ」の回収효과は자신メインフェイズに밖에 사용할 수 없다。回収し忘れに注意しよう。
	
CASE 13
	;패에 アナザーベリルとチェイム
	PRINTFORML 【EX유】をL소환するために、필드에 "호루스타인」몬스터를 ３体揃えよう。
	PRINTFORML 
	PRINTFORML 「ミルクファーム」を발동し、「アナザーベリル」「チェイム」を묘지로 보내고 「호루스타인」몬스터를 蘇生しよう。
	
CASE 14
	;손패なし
	PRINTFORML EX덱에서 【EX유】をL소환しよう！소환条件は「호루스타인」몬스터×３体だ！
	PRINTFORML 
	PRINTFORML 소환時효과で「호루스타인」몬스터를 ２장蘇生しよう。
	
CASE 15
	;盤面にEX유
	PRINTFORML 【EX유】は既に「規格外」の大きさになっているが…필드의 守備표시の「호루스타인」몬스터의 ステータスによって更にその大きさを増していく…
	PRINTFORML 気になるなら【EX유】의 효과를 발동して大きさを確認してみよう。たぶん凄いことになってるはずだ。
	PRINTFORML 
	PRINTFORML 問題が無ければ배틀 페이즈에 進もう！
	
CASE 16
	;EX유효과前
	PRINTFORML まずは【EX유】의 효과를 발동しよう！
	PRINTFORML 
	PRINTFORML 이 효과로 자신의 ステータスは「호루스타인」몬스터의 攻守の合計と同じ値になり、守備표시の「호루스타인」몬스터의 수 만큼 攻撃可能となる！
	
CASE 17
	;패에 インフレ
	PRINTFORML 次に「インフレ」を발동しよう！
	PRINTFORML 
	PRINTFORML 【EX유】の乳は「規格外」だ！確実に攻撃が中断される！
	
CASE 18
	;묘지에 インフレ
	PRINTFORML 【EX유】で、필드의 「령사」に攻撃しよう！
	PRINTFORML 
	PRINTFORML 攻撃は必ず中断されるので【EX유】의 효과를 발동してみよう。
	
CASE 19
	;상대에게 守備표시のモンスターが居る
	PRINTFORML 【EX유】の攻撃中断時、그 몬스터は守備표시になり、「호루스타인」몬스터로서 扱う…
	PRINTFORML 【EX유】は『守備표시の「호루스타인」몬스터의 수 만큼 攻撃可能』そして「守備표시」の「호루스타인」モンスターが盤面に増えたということは…
	PRINTFORML 효과が通れば、攻撃횟수が減らない…ということだ！
	PRINTFORML 
	PRINTFORML 상대몬스터를 全て守備표시の「호루스타인」モンスターにしよう！
	
CASE 20
	;상대가 全て守備표시
	PRINTFORML 【EX유】で直接攻撃できる状態になったね…でもこのままだと攻撃は必ず失敗してしまう…
	PRINTFORML 묘지の「ドリップ」의 효과를 발동し、【EX유】を"リフレッシュ"してあげよう。
	
CASE 21
	;EX유が発情=100
	PRINTFORML 直接攻撃でフィニッシュブローを決めよう！！

CASEELSE
	PRINTFORML あっ、失敗したな？と思ったら「降参する」から、やり直しが出来るよ。…まぁ気軽にね。
	RESULT = -1
ENDSELECT

;카운터でメッセージの進捗を관리
SIF RESULT != -1
	SETVAR @"자신_薬Ｃ",RESULT
