@CARDNAME_79894,参照先
;ココで指定卡片の名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = ドレミアイドル・交響舞台
	CASE "略称"
		RESULTS = ♫ 交響舞台
	CASE "カテゴリ"
		RESULTS:0 = ドレミコード
		RESULTS:1 = ドレミアイドル
		RESULTS:2 = E.R.A
ENDSELECT


@CARD_79894(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "種類"
		RETURN フィールド
ENDSELECT

RETURN 0

@CARD_EXPLANATION_79894(種類)
#DIM DYNAMIC 種類

PRINTL このカード名はルール上も「ドレミコード」カードとして扱う。
PRINTL 自身のフィールドを「ドレミアイドル・交響舞台」とする。
CALLFORM CARD_ABLE(1,魔罠起動, 手札起動)
PRINTL ①：このカードの発動時の効果処理として、このデュエル中、
PRINTL    自身の戦場・魔法・罠ゾーンに「ドレミアイドル」Pモンスターが存在する場合、
PRINTL    相手戦場の「ドレミアイドル推し」に該当するモンスターの効果は無効化され、攻撃できなくなる。
CALLFORM CARD_ABLE(0,永続効果)
PRINTL ②：このカードが戦場に表側表示で存在する場合、自身の戦場の「ドレミアイドル」Pモンスター以下の効果を得る。
PRINTL   ●このカードが戦闘を行う場合に発動できる。
PRINTL     このカードを自身の魔法・罠ゾーンにに表側表示で置く、その攻撃を無効にし、そのモンスターを「ドレミアイドル推し」にする。
PRINTL     そのモンスターが既に「ドレミアイドル推し」である場合、そのモンスターのコントロールを得る。
CALLFORM CARD_ABLE(2,効果後強制誘発)
PRINTL ③：このカードが戦場に表側表示で存在する場合、相手がモンスターを特殊召喚した時に発動し、そのモンスターをランダムな「ドレミアイドル推し」にする。

@CARDCAN_79894(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ


CALL CARD_NEGATE(決闘者,種類,ゾーン,場所,79894)
SIF RESULT == 1
	RETURN 0

IF 種類 == 魔罠起動 || 種類 == 手札起動
	IF 種類 == 魔罠起動
		SIF GETVAR(@"%決闘者%_魔_表:場所") == 1
			RETURN 0
	ENDIF
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 決闘者
		RETURN 0
	RETURN 1
	SIF 魔罠数(決闘者) == 5
		RETURN 0
	RETURN 1
ELSEIF 種類 == 永続効果
	SIF ゾーン != "魔罠"
		RETURN 0
	SIF GETVAR(@"%決闘者%_魔_表:場所") != 1
		RETURN 0
	RETURN 1
ELSEIF 種類 == 永紋章起動
	RETURN 1
ELSEIF 種類 == 効果後強制誘発
	SIF ゾーン != "魔罠"
		RETURN 0
	SIF GETVAR(@"%決闘者%_魔_表:場所") >= 2
		RETURN 0
	CALL FULLRESET
	CALL CARD_CHECK_FIN_DATA(決闘者,"召喚全般",1)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ENDIF



@CARDEFFECT_79894(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC 効果先

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

IF 種類 == 魔罠起動 || 種類 == 手札起動
	;卡片发动＆設置まで
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,79894,1)
	IF RESULT == 0
		CALL CARD_DISPOSE(決闘者,ゾーン,場所,魔罠行き)

		PRINTFORML
		PRINTFORML   %PRINT_COLOR("「ドレミアイドル",C_H_PINK) + PRINT_COLOR("・交響舞台」」が立ち上がり、",C_G_YELLOW) + PRINT_COLOR("七色のライトが七人の",C_L_BLUE) + PRINT_COLOR("可憐な姿を照らし出す",C_W_RED)%
		PRINTFORML
		PRINTFORML   %PRINT_COLOR("「私たちの煌めくス",C_P_BLUE) + PRINT_COLOR("テージに酔いしれて、",C_ORANGE) + PRINT_COLOR("ファンになってね!」",C_W_BLUE)%
		PRINTFORML
		PRINTFORMW
		;「ドレミアイドル・交響舞台」升起、七色的灯光聚焦于七位俏丽的身影
		;「陶醉在我们闪耀的演出中、变成我们的粉丝吧！」
		CALL CARD_RESERV(決闘者,79894,永紋章予約)
	ENDIF

ELSEIF 種類 == 永続効果
	CALL SET_FIELD_MAGIC_INFO(決闘者,"ドレミアイドル・交響舞台")

ELSEIF 種類 == 永紋章起動

	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件名前 = ドドレミアイドル・キューティア
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	IF RESULT == 1
		CALL FULLRESET
		効果条件カテゴリ == キューティア推し
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦無")
	ENDIF
	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件名前 = レドレミアイドル・ドリーミア
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	IF RESULT == 1
		CALL FULLRESET
		効果条件カテゴリ == ドリーミア推し
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦無")
	ENDIF
	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件名前 = ミドレミアイドル・エリーティア
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	IF RESULT == 1
		CALL FULLRESET
		効果条件カテゴリ == エリーティア推し
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦無")
	ENDIF
	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件名前 = ファドレミアイドル・ファンシア
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	IF RESULT == 1
		CALL FULLRESET
		効果条件カテゴリ == ファンシア推し
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦無")
	ENDIF
	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件名前 = ソドレミアイドル・グレーシア
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	IF RESULT == 1
		CALL FULLRESET
		効果条件カテゴリ == グレーシア推し
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦無")
	ENDIF
	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件名前 = ラドレミアイドル・エンジェリア
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	IF RESULT == 1
		CALL FULLRESET
		効果条件カテゴリ == エンジェリア推し
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦無")
	ENDIF
	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件名前 = シドレミアイドル・ビューティア
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	IF RESULT == 1
		CALL FULLRESET
		効果条件カテゴリ == ビューティア推し
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
		CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦無")
	ENDIF

ELSEIF 種類 == 効果後強制誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,79894,2)
	IF RESULT == 0
		効果先 = FINAL_SUMMON_TARGET(決闘者,1)
		IF 効果先 != 5 && 効果先 != -1
			TRYCALLFORM CARDNAME_{GETVAR(@"%対面者%_戦場:効果先")}, "名前"		
			SELECTCASE RAND:7
				CASE 0
						SETCOLOR C_H_PINK
					PRINTFORML 「ドレミアイドル」たちの舞台は%RESULTS%の胸に深く染み渡った，それを「キューティア推し」にした！
					PRINTFORMW
					CALL CARD_SET_CATEGORY(対面者,"戦場",効果先,"キューティア推し")
				CASE 1
						SETCOLOR C_G_YELLOW
					PRINTFORML
					PRINTFORML 「ドレミアイドル」たちの舞台は%RESULTS%の胸に深く染み渡った，それを「ドリーミア推し」にした！
					PRINTFORMW 
					CALL CARD_SET_CATEGORY(対面者,"戦場",効果先,"ドリーミア推し")
				CASE 2
						SETCOLOR C_L_BLUE
					PRINTFORML
					PRINTFORML 「ドレミアイドル」たちの舞台は%RESULTS%の胸に深く染み渡った，それを「エリーティア推し」にした！
					PRINTFORMW 
					CALL CARD_SET_CATEGORY(対面者,"戦場",効果先,"エリーティア推し")
				CASE 3
						SETCOLOR C_W_RED
					PRINTFORML
					PRINTFORML 「ドレミアイドル」たちの舞台は%RESULTS%の胸に深く染み渡った，それを「ファンシア推し」にした！
					PRINTFORMW 
					CALL CARD_SET_CATEGORY(対面者,"戦場",効果先,"ファンシア推し")
				CASE 4
						SETCOLOR C_P_BLUE
					PRINTFORML
					PRINTFORML 「ドレミアイドル」たちの舞台は%RESULTS%の胸に深く染み渡った，それを「グレーシア推し」にした！
					PRINTFORMW 
					CALL CARD_SET_CATEGORY(対面者,"戦場",効果先,"グレーシア推し",1)
				CASE 5
						SETCOLOR C_ORANGE
					PRINTFORML
					PRINTFORML 「ドレミアイドル」たちの舞台は%RESULTS%の胸に深く染み渡った，それを「エンジェリア推し」にした！
					PRINTFORMW 
					CALL CARD_SET_CATEGORY(対面者,"戦場",効果先,"エンジェリア推し")
				CASE 6
						SETCOLOR C_W_BLUE
					PRINTFORML 
					PRINTFORML 「ドレミアイドル」たちの舞台は%RESULTS%の胸に深く染み渡った，それを「ビューティア推し」にした！
					PRINTFORMW 
					CALL CARD_SET_CATEGORY(対面者,"戦場",効果先,"ビューティア推し")
			ENDSELECT
				RESETCOLOR
		ENDIF
	ENDIF
ENDIF


@DoSol_FansAttack(決闘者,場所,调教对象,调教强度)
#DIMS DYNAMIC 決闘者
#DIM DYNAMIC 場所
#DIM DYNAMIC 调教对象
#DIM DYNAMIC 调教强度


	SETCOLOR C_PINK
PRINTFORML 
PRINTFORML  近距离接触偶像的亲卫队们对%CALLNAME:调教对象%产生了不轨之心
PRINTFORML  众人闯入休息室将%CALLNAME:调教对象%按倒并强行灌入了媚药 
PRINTFORML
PRINTFORML  ………
PRINTFORML  ………
PRINTFORML  ………
PRINTFORMW
IF GETVAR(@"%決闘者%_MZ_調教:場所") > 5
	PRINTFORML  经过反复投药、%CALLNAME:调教对象%的身体彻底沦陷在情欲之中
	PRINTFORMW
	PRINTFORML 「作为大家长期支持的答谢、今天用小穴给大家带来特殊服务哦❤❤❤」
	PRINTFORML  %CALLNAME:调教对象%主动跨坐到亲卫队的身上、彻底湿润的蜜穴将肉棒完全吞噬
	PRINTFORMW
	CALL LOST_VIRGIN(调教对象, -1 , 1)
	PRINTFORML
	PRINTFORML  ………
	PRINTFORML  ………
	PRINTFORML  ………
	PRINTFORMW
	SELECTCASE RAND:3
		CASE 0
			PRINTFORML 「大家的肉棒❤ 最喜欢了❤❤❤」
		CASE 1
			PRINTFORML 「%CALLNAME:调教对象%的小穴❤ 还想要更多肉棒❤❤❤」
		CASE 2
			PRINTFORML 「太舒服了❤ 已经没有肉棒就活不下去了❤❤❤」
	ENDSELECT
	PRINTFORML
	PRINTFORML  紧锁的房间之中、传出阵阵的欢愉娇声
	PRINTFORMW
	CALL EROTIC_MOVE("騎乗位",调教对象,-1,调教强度 * GETVAR(@"%決闘者%_MZ_調教:場所") * 50)
	PRINTFORMW

		
	IF TALENT:调教对象:恋慕 >= 1
		SETCOLOR C_PINK
		PRINTFORML  「%CALLNAME:MASTER%………对不起………❤❤❤」
		PRINTFORMW
	ENDIF

	CALL SET_FIELD_INFO(決闘者,"戦場",場所,"調教",调教强度 * 2)
	
ELSEIF GETVAR(@"%決闘者%_MZ_発情:場所") == 0
	PRINTFORML  %CALLNAME:调教对象%拼尽全力挣脱束缚、逃离了房间
	PRINTFORML  在药物的作用下、%CALLNAME:调教对象%的身体逐渐变得火热
	PRINTFORMW
	CALL EROTIC_MOVE("媚毒汚染",调教对象,-1,100)
	PRINTFORMW
	
ELSEIF GETVAR(@"%決闘者%_MZ_調教:場所") < TALENT:调教对象:恋慕
	PRINTFORML  %CALLNAME:调教对象%发情的身体逐渐散失了力气……………………
	PRINTFORML  怀揣着对%CALLNAME:MASTER%的恋心、%CALLNAME:调教对象%爆发出最后一丝力量挣脱了束缚
	PRINTFORMW
	PRINTFORML  在后台的隐秘角落、%CALLNAME:调教对象%一边思念着%CALLNAME:MASTER%一边抚慰愈加火热的躯体
	PRINTFORMW
	CALL EROTIC_MOVE("自慰",调教对象,-1,100)
	PRINTFORMW

		SETCOLOR C_PINK
	PRINTFORML  「%CALLNAME:MASTER%………救救我………」
	PRINTFORMW

	CALL SET_FIELD_INFO(決闘者,"戦場",場所,"調教",1)

ELSE
	PRINTFORML  在药物的作用下、%CALLNAME:调教对象%的身体愈加火热、抵抗也逐渐失去了力量
	SELECTCASE RAND:3
		CASE 0
			PRINTFORML  被情欲吞噬理智的%CALLNAME:调教对象%伸出双手、套弄着粉丝们的淫棒………
			PRINTFORMW
			CALL EROTIC_MOVE("催眠手コキ",调教对象,-1,调教强度 * 100)
		CASE 1
			PRINTFORML 被情欲吞噬理智的%CALLNAME:调教对象%用樱唇吞吐着粉丝们的肉棒………
			PRINTFORMW
			CALL EROTIC_MOVE("催眠フェラ",调教对象,-1,调教强度 * 100)
		CASE 2
			PRINTFORML  被情欲吞噬理智的%CALLNAME:调教对象%将胸部贴上了粉丝们的阴茎………
			PRINTFORMW
			CALL EROTIC_MOVE("催眠パイズリ",调教对象,-1,调教强度 * 100)
	ENDSELECT
	PRINTFORMW

	CALL SET_FIELD_INFO(決闘者,"戦場",場所,"調教", 2)

		SETCOLOR C_PINK
	IF GETVAR(@"%決闘者%_MZ_調教:場所") > 5
		PRINTFORML  %CALLNAME:调教对象%的身体被药物彻底浸食、蜜穴溢出阵阵爱液、渴求着雄性的侵入
		PRINTFORMW
		CALL SOURCE_CALC_液体(调教对象, -1, 5000)
	ENDIF
	IF TALENT:调教对象:恋慕 >= 1
		PRINTFORML  「%CALLNAME:MASTER%………救救我………」
		PRINTFORMW
	ENDIF
ENDIF
	RESETCOLOR
RETURN
