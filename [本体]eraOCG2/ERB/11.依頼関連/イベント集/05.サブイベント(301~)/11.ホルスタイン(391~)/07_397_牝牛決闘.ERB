
@IRAI_DUEL_INTRO_397
#DIM DYNAMIC カウンタ
;듀얼 전에 "詰め플래그"에 1을 설정하고, 최초의 5드로우를 스킵
;턴을 넘어서 처리하고 싶으므로, 듀얼이 시작되면 詰め플래그를 리셋
詰め플래그 = 0

;詰め플래그로 스킵해버린 초기화
CALL CARD_LOADUP

;필요에 따라, 턴 플레이어를 변경(여기서 자신으로 하면, 상대의 턴이 된다)
;ターンプレイヤー = 자신

;1 이상의 값을 넣으면, 1번만 드로우가 스킵된다
SETVAR @"자신_ドロースキップ", 1
SETVAR @"상대_ドロースキップ", 1

;SETVAR @"자신_バトルスキップ", 1
;SETVAR @"상대_メインスキップ", 1

;필드의 정보를 설정
;SETVAR @"자신_魔_所有:2", 1;자신의 카드
;SETVAR @"자신_魔_表:2", 1;表
;SETVAR @"자신_마함:2",79555;호루스타인 밀크 팜

SETVAR @"상대_MZ_所有:2", 2;상대의 카드
SETVAR @"상대_MZ_表:2", 1;表
SETVAR @"상대_필드:2",1000;BMG

;자신의 패
SETVAR @"자신_손패:0", 79559;EX젖
SETVAR @"자신_손패:1", 99555;インフレ
SETVAR @"자신_손패:2", 99555;インフレ

;자신의 덱
SETVAR @"자신_덱:0", 99555;인플레이션
;SETVAR @"자신_덱:1", 99555;인플레이션

;자신의 EX덱
SETVAR @"자신_EX덱:0", 41000;룡BMG
SETVAR @"자신_EX덱:1", 2055;허스키
SETVAR @"자신_EX덱:2", 11870;신코 이브
SETVAR @"자신_EX덱:3", 41390;로즈마리
SETVAR @"자신_EX덱:4", 41816;취기사 카름
SETVAR @"자신_EX덱:5", 42103;엑소시스터 지브리누
SETVAR @"자신_EX덱:6", 2002;카멜리아
SETVAR @"자신_EX덱:7", 1631;아폴로우사

;자신의 묘지
SETVAR @"자신_묘지:0", 25965;빅 코알라
;SETVAR @"자신_묘지:1", 23972;어둠・사큐버스 나이트
;SETVAR @"자신_묘지:2", 11607;빛・퀴즈 나이트


;상대의 패
;SETVAR @"상대_손패:0", 70090;카운트다운
;SETVAR @"상대_손패:1", 70090;카운트다운
;SETVAR @"상대_손패:2", 70090;카운트다운
;SETVAR @"상대_손패:3", 71006;돌진

;상대의 덱：뽑아도 쓸 수 없는 카드
SETVAR @"상대_덱:0", 41811;의식 가스트크라케
SETVAR @"상대_덱:1", 41811
SETVAR @"상대_덱:2", 41811
SETVAR @"상대_덱:3", 41811

ライフ_자신 = 2000
ターン数 = 0;이 턴은 전투를 시키고 싶지 않으므로, 1턴째 취급으로 한다

;승리 조건의 설정, 여기서 패배 듀얼의 승리 조건을 설치할 수 있다.
@IRAI_DUEL_CONDVIC_397
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 듀얼進捗
#DIM DYNAMIC 現在値

VARSET RESULT

듀얼리스트 = 자신
対面者 = 상대

現在値 = GETVAR(@"%듀얼리스트%_薬Ｃ")
SIF INRANGE(現在値,0,1)
	現在値 = 2

듀얼進捗 = 1

;상대의 메인 페이즈 2가 되면 클리어
SIF ターンプレイヤー == 対面者 && メインフェイズ２ == 1
	RETURN 1

;EX발동 완료
듀얼進捗 ++
SIF 발동済_1(듀얼리스트,79559) && 現在値 == 듀얼進捗
	RETURN 듀얼進捗 + 1

;묘지에 "インフレ"
듀얼進捗 ++
CALL FULLRESET
효과範囲묘지 = 1
효과条件ID = 99555
효과条件CNT = 1
CALL CARD_CHECK_ADV("자신")
SIF RESULT == 1  && 現在値 == 듀얼進捗
	RETURN 듀얼進捗 + 1

;インフレ묘지효과발동済み
듀얼進捗 ++
SIF 발동済_2(듀얼리스트,99555) && 現在値 == 듀얼進捗
	RETURN 듀얼進捗 + 1

;상대 턴
듀얼進捗 ++
SIF ターンプレイヤー == 対面者 && 現在値 == 듀얼進捗
	RETURN 듀얼進捗 + 1

;배틀 페이즈
듀얼進捗 ++
SIF バトルフェイズ == 1 && 現在値 == 듀얼進捗
	RETURN 듀얼進捗 + 1

;패 없음
듀얼進捗 ++
SIF 現손패(듀얼리스트) == 0 && 現在値 == 듀얼進捗
	RETURN 듀얼進捗 + 1

RETURN 現在値

;메시지의 설정
@IRAI_DUEL_MESSAGE_397(存在確認)
#DIM DYNAMIC 存在確認
#DIMS DYNAMIC 듀얼리스트
VARSET RESULT

듀얼리스트 = 자신

IF 存在確認 == 1
	RETURN 1
ENDIF

;리액션
CALL IRAI_DUEL_CONDVIC_397

SELECTCASE RESULT

CASE 1
	;듀얼 클리어!
	PRINTFORML 수고했어!
	PRINTFORML "승리 조건 달성"을 누르면 종료돼!
	PRINTFORML 
	PRINTFORML 　[9013] - 승리 조건 달성

;1턴째
CASE 2
	;초기 표시
	PRINTFORML 이번에는 EX젖을 이용한 소소한 팁이다. 상대를 발정시켜 확실하게 공격을 중단시켜 보자.
	PRINTFORML 상대의 메인 페이즈 2가 되면 클리어다.
	PRINTFORML 우선은 "【EX유】등록"으로 "암소 풍유(인플레이션)"을 패에 넣자.
CASE 3
	;EX발동 완료
	PRINTFORML 【EX유】등록"은 대상 암소 몬스터의 젖을 "규격 외"가 될 때까지 키운다.
	PRINTFORML 
	PRINTFORML 이번에는 이대로 턴을 종료하자.
CASE 4
	;묘지에"インフレ"
	PRINTFORML 한단계 커졌네.
	PRINTFORML "인플레"는 묘지에 야수족 일반 몬스터가 존재하는 경우, 패에 회수할수 있어.
	PRINTFORML 
	PRINTFORML 이번엔 빅 코알라가 묘지에 보이니까, "인플레"를 회수하자.
CASE 5
	;インフレ묘지효과발동済み
	PRINTFORML "인플레이션"는 배틀 페이즈에도 발동할 수 있어.
	PRINTFORML 이대로 턴을 진행해서, 상대의 배틀 페이즈까지 진행하자!
CASE 6
;상대ターン
	PRINTFORML 상대의"배틀 페이즈"까지 턴을 진행하자。
CASE 7
	;バトルフェイズ
	PRINTFORML "인플레"를 발동하고、상대의 젖을 크게 만들자！
	PRINTFORML "인플레"는"가삼의 크기를 １단계 올린다"거나"필드에서 가장 큰 가슴의 크기로 할"수 있어。
	PRINTFORML 손패의"인플레"를 전부 발동해서, 상대의 블랙 매지션 걸을"규격 외"로 만들어 주자!
CASE 8
	;패 없음
	PRINTFORML "인플레이션"으로 부여되는 발정 효과는 젖의 크기에 따라 달라진다.
	PRINTFORML "규격 외"라면 공격 중단 확률은 100퍼센트가 된다. 뭐니 뭐니 해도 너무 크니까.
	PRINTFORML 
	PRINTFORML …만약、"ＥＸ유"에 의해"규격 외"까지 커져버린 몬스터가 필드에 있다면…？
	PRINTFORML 문자 그대로, 엄청난 인플레가 일어나。
	PRINTFORML 이대로 턴을 진행하자!

CASEELSE
	PRINTFORML 앗, 실패했네? 싶으면 "항복하기"에서 다시 시작할 수 있어. …뭐, 부담 없이.
	RESULT = -1
ENDSELECT

;카운터로 메시지의 진행을 관리
SIF RESULT != -1
	SETVAR @"자신_薬Ｃ",RESULT
