@IRAI_EVENT_422(参照先)
#DIMS DYNAMIC 参照先
#DIM DYNAMIC 대상캐릭터

VARSET RESULT
VARSET RESULTS

;・アドリブバチバチねじ込んであります。
;・セリフとかのところはコピペしてもらって大丈夫です。
;(むしろ分かんないところをお任せしてしまうような形になってしまってスイマセン…)
;・不明点、解釈違いによる文章改良点があれば是非ご相談ください。
;都合에 의해 マルファ 이외의 シスターたちのセリフは省略しております


SELECTCASE 参照先
	CASE  "名前"
		RESULTS = (CP-CRS2)제 영혼을 손에 맡깁니다
	CASE "이벤트種"
		RETURN 이벤트_通常
	CASE "依頼先"
		RETURN 即時開始
	CASE "詳細"
		PRINTL 我々が深淵を見つめる時、
		PRINTL 深淵もまた我々を見つめ返す。
		PRINTL その誘いに応じたとして、
		PRINTL 誰がそれを責められるだろうか？
		PRINTL 
		PRINTL 報酬：？
	CASE "条件"
		SIF 依頼_完了횟수:421 == 0
			RETURN 0
		RETURN 1
ENDSELECT

RETURN 0

@IRAI_ACT_422(参照)
#DIM DYNAMIC 参照
#DIM DYNAMIC 이벤트主,10
;いったんターゲットを非難させる（バグ回避用）

이벤트主:0 = NO_TO_CHARANUM(2100)
이벤트主:1 = NO_TO_CHARANUM(2101)
이벤트主:2 = NO_TO_CHARANUM(2102)
이벤트主:3 = NO_TO_CHARANUM(2103)
이벤트主:4 = NO_TO_CHARANUM(2104)

IF 依頼_달성상황 == 0
;始まり
	PRINTFORMW 『サバト』の一件の後、あるメールが届いた。
	PRINTFORML 『お久しぶりです、%NAME:MASTER%様。シスター・マルファです。
	PRINTFORML 　今回は、%NAME:MASTER%様にお願いしたい事がありまして連絡した次第です
	PRINTFORMW 　もし聞いていただけるなら、前回と同じ場所でお待ちします』
	PRINTFORMW メールはマルファからの物だった。
	PRINTFORMW いつの間にか連絡先が交換されてたみたいだ。
	PRINTFORMW もしマルファのお願いを聞く気があるなら前回の裏通りにあるビルに向かうといいだろう。
	PRINTFORMW もう『サバト』は終わったはずなので、時間はいつでも大丈夫なはずだ。
	TIME += 10
	依頼_場所:0 = 場所_裏通り
	依頼_달성상황 ++

ELSEIF 依頼_달성상황 == 1
;本題
	PRINTFORMW 前回のビルに入ると、マルファは一人でこちらを待っていた。
	PRINTFORMW 「これは%NAME:MASTER%様。来ていただけて嬉しく存じます」
	PRINTFORMW マルファは恭しく頭を下げる。
	PRINTFORMW それでお願いとは何だろうか。
	PRINTFORMW 「はい。ご存じの通り、この世界には今色んなデュエルモンスターズの정령が色んな理由で来ているのですが、
	PRINTFORMW 　その中に、私の妹やその仲間たちも迷い込んでいるのです。
	PRINTFORMW 　%NAME:MASTER%様には、その妹たちの回収をお願いしたく」
	PRINTFORMW なるほど。ざっくり言えば、다른 엑소시스터の정령を揃えて来ればいいという事だろうか。
	PRINTFORMW 「その通りです。回収の方法は問いませんので、何卒よろしくお願いいたします」
	IF 依頼_完了횟수:11 != 0
		PRINTFORMW それなら何とかやってみると答えた。
		PRINTFORML 「ありがとうございます。それと一人だけ、エリスの所在は分かっております
		PRINTFORMW 　どうやらあの子は、人間社会に混ざって教会のシスターをやっているようです」
		PRINTFORMW そう言えば、教会でそれっぽいシスターと会った覚えがある。
		PRINTFORMW 似てるとは思ってたけど、本人だったのか……。
		PRINTFORMW 都合を見て回収に向かうとしよう。
		依頼_場所:1 = 場所_教会
	ENDIF
	PRINTFORMW マルファと別れて、一度ビルを出た。
	PRINTFORMW 다른 엑소시스터モンスターは「エリス」「ステラ」「ソフィア」「イレーヌ」だったはず。
	PRINTFORMW パックを開けてその카드를 引き当てたり、ショップでシングル구입したり、別件で出会った정령を그대로 カードにしてたり、
	PRINTFORMW 色んな方法で엑소시스터몬스터를 揃えてまた来よう。
	TIME += 10
	依頼_달성상황 ++

ELSEIF 依頼_달성상황 == 2 && CFLAG:MASTER:현재위치 == 場所_教会
	PRINTFORMW 少し怖い気持ちはあるが、教会に顔を出してみた。
	PRINTFORMW 「あっ、あなたはこの前の！今日はお祈りに来たんですか？」
	PRINTFORMW するとお目当てのエリスに迎えられた。
	PRINTFORMW 単刀直入に、マルファの事を伝えて連れて行きに来たと伝えた。
	PRINTFORMW 「えっ、マルファお姉さまもこちらに？
	PRINTFORMW 　……分かりました。ついて行きましょう」
	PRINTFORMW エリスの同意을 얻고、彼女をカードにした。
	CALL CARD_GET_CHARA(이벤트主:0)
	PRINTFORMW さて、次の場所に向かおう……。
	TIME += 10
	依頼_場所:1 = 0
ELSEIF 依頼_달성상황 == 2 && CFLAG:MASTER:현재위치 == 場所_裏通り
	IF CFLAG:(이벤트主:0):소유함 == 1 && CFLAG:(이벤트主:1):소유함 == 1 && CFLAG:(이벤트主:2):소유함 == 1 && CFLAG:(이벤트主:3):소유함 == 1
		PRINTFORMW マルファにお願いされた정령は揃えた。
	ELSE
		PRINTFORMW マルファにお願いされた정령はまだ揃ってない。
		PRINTFORMW 揃える「엑소시스터」モンスターは「エリス」「ステラ」「ソフィア」「イレーヌ」だ。
		PRINTFORMW パックを開けてその카드를 引き当てたり、ショップでシングル구입したり、別件で出会った정령を그대로 カードにしてたり
		PRINTFORMW 色んな方法で엑소시스터몬스터를 揃えてまた来よう。
		RETURN
	ENDIF
	PRINTFORMW 例のビルに入り、待っていたマルファに声を掛ける。
	PRINTFORMW 「ありがとうございます、%NAME:MASTER%様。これで私も一安心です」
	PRINTFORMW なら良かった。
	PRINTFORMW それで카드를 渡そうとしたら、マルファが手で止めた。
	PRINTFORMW 「いえ、渡してくれなくとも、その所在を分かっただけで十分です」
	PRINTFORMW そんなものかと思いつつも、せっかく入手した카드를 渡さなくていいのなら、と카드를 ケース으로 되돌린다。
	PRINTFORMW 「それでお礼の事ですが、%NAME:MASTER%様は듀얼리스트であらせますね？それでしたら、強い카드가 欲しくありませんか？」
	PRINTFORMW それはそうだが、強いカードでもくれるんだろうか？
	PRINTFORMW 「強い카드를 用意する事はできませんが、%NAME:MASTER%様が集めてくださった「엑소시스터」の子達を強くする事はできます」
	PRINTFORMW 엑소시스터を強く？
	PRINTFORML 「ええ。%NAME:MASTER%様はこう思った事はありませんか？
	PRINTFORMW 　엑소시스터の엑시즈モンスターは強いのに、メイン덱の몬스터의 スペックはいまいちだと」
	PRINTFORMW それは……
	PRINTFORMW いや、しかし、いくら자신だけ展開力が強いからと言って、それをマルファが言っていいのだろうか？
	PRINTFORMW 「이 카드를 使えば、엑소시스터をもっと強いカードにできます」
	TRYCALLFORM CARD_UI(279781)
	PRINTFORMW 
	PRINTFORMW 이 카드는 ……？
	PRINTFORMW 크라이시스터と言われても、知らないカードに変化させる효과は不安で使いたくないが。
	PRINTFORMW 「それでは練習をしましょうか。こちらへ」
	PRINTFORMW マルファに案内されながら、奥の部屋に이동する。
	PRINTFORMW その部屋には、虚ろな目をしてデュエルディスクを装着している人がいた。
	PRINTFORMW 「あの物は、신官の支配から解放されたものの、手遅れで정신を파괴된 者です。
	PRINTFORMW 　ただ、辛うじてデュエルだけはできますので、あの신官の덱を使わせています。
	PRINTFORMW 　この者を練習台にしてみましょう。 카드는 こちらで用意いたします」
	PRINTFORMW どうする……？
	PRINTFORMW 知らない카드를 使うのが不安で、今の엑소시스터カードのままがいいなら断ってもいいかも知れない。
	PRINTFORML [0] - 「練習」してみる
	PRINTFORML [1] - 断る
	BINPUT
	IF RESULT == 0
		PRINTFORMW 「では、お楽しみください」
		TARGET = -1
		CALL CHOICE_DUEL_TYPE(422)
		
		PRINTFORMW これが「크라이시스터」
		PRINTFORMW 確かに「엑소시스터」より효과が強くなってた。
		PRINTFORMW しかし、다른 カード의 효과でしか出せないのはやはりネックだ。
		PRINTFORMW 「そう思われるのでしたら、お持ちの엑소시스터の카드를 그대로 크라이시스터のカードにキョウカするのも可能です」
		PRINTFORMW そうなのか？
		PRINTFORMW 「はい。しかし条件が必要です。엑소시스터の몬스터 카드 を同じ종류で３장そろえた上で、ある의식が必要になります」
		PRINTFORMW 의식とはどんな内容なんだ？
		PRINTFORMW 「それは、その時のお楽しみです。それまでは이 카드를 使ってください」
		CALL CARD_GET_SINGLE(79781)
		ITEM:79781 += 2
		TRYCALLFORM CARD_UI(79781)
		PRINTFORMW 
		PRINTFORMW ……？さっきと텍스트が違うようだが。
		PRINTFORMW 「申し訳ありません。先ほどのデュエルで私の力を大分消費しましたので、このような形になりました」
		PRINTFORMW そうか。こっちとしては自力でどうにも出来ないので、何とも言えないが。
		PRINTFORMW 「それでは、今回はここまでにしましょう
		PRINTFORMW 　마지막으로……、私でお楽しみいたしますか？」
		PRINTFORML
		PRINTFORML [0] - うん！
		PRINTFORML [1] - いや、疲れてるから……
		BINPUT
		IF RESULT == 0
			PRINTFORMW 「それでは、失礼いたします……」
			PRINTFORMW マルファは前回と同じく流れるように妖艶な動きでこちらを押し倒した。
			VARSET 依頼조교대상,-1
			依頼조교대상 = 이벤트主:4
			CALL EVENT_TRAIN
			PRINTFORMW 「ご만족いただけましたか？」
			SETBIT CFLAG:이벤트主:4 ,0
			PRINTFORMW 大変만족した。
		ELSEIF RESULT == 1
			PRINTFORMW 「そうですか。それは失礼いたしました」
			PRINTFORMW マルファは少し残念そうに引き下がった。
		ENDIF
		PRINTFORMW もうお互いに用が無いので、ここまま別れる事になった。
		PRINTFORMW 카드를 揃えたら、会う約束をしてまた来よう。
		PRINTFORMW 「엑소시스터」の카드를 入れた덱ケースから、「どうして……」と叫ぶ声が聞こえて気がするが、気のせいだろう。
		RETURN 2
	ELSEIF RESULT == 1
		PRINTFORMW 「そうですか。それは残念です。
		PRINTFORMW 　気が変わりましたらまたいらしてください」
		RETURN
	ENDIF
ENDIF

@IRAI_DECK_422(듀얼리스트)
#DIMS DYNAMIC 듀얼리스트

SIF 듀얼리스트 == "자신"
	RETURN 20422
SIF 듀얼리스트 == "상대"
	RETURN 20421
RETURN 0

@IRAI_DUEL_INTRO_422
PRINTFORMW 「では이 카드를 ……」
PRINTFORMW マルファが카드를 手渡して来る。

CALL CARD_GENERATE_HAND("자신",279781)

;ちょっとした엑소시스터덱
@DUELDECK_20422(듀얼리스트)
#DIMS DYNAMIC 듀얼리스트

SETVAR @"%듀얼리스트%_덱:0", 2100
SETVAR @"%듀얼리스트%_덱:1", 2100
SETVAR @"%듀얼리스트%_덱:2", 2100
SETVAR @"%듀얼리스트%_덱:3", 2101
SETVAR @"%듀얼리스트%_덱:4", 2101
SETVAR @"%듀얼리스트%_덱:5", 2101
SETVAR @"%듀얼리스트%_덱:6", 2102
SETVAR @"%듀얼리스트%_덱:7", 2102
SETVAR @"%듀얼리스트%_덱:8", 2102
SETVAR @"%듀얼리스트%_덱:9", 2103
SETVAR @"%듀얼리스트%_덱:10", 2103
SETVAR @"%듀얼리스트%_덱:11", 2103
SETVAR @"%듀얼리스트%_덱:12", 62100
SETVAR @"%듀얼리스트%_덱:13", 62100
SETVAR @"%듀얼리스트%_덱:14", 62100
SETVAR @"%듀얼리스트%_덱:15", 70001
SETVAR @"%듀얼리스트%_덱:16", 70001
SETVAR @"%듀얼리스트%_덱:17", 70001
SETVAR @"%듀얼리스트%_덱:18", 70003
SETVAR @"%듀얼리스트%_덱:19", 70003
SETVAR @"%듀얼리스트%_덱:20", 70004
SETVAR @"%듀얼리스트%_덱:21", 70100
SETVAR @"%듀얼리스트%_덱:22", 70100
SETVAR @"%듀얼리스트%_덱:23", 70100
SETVAR @"%듀얼리스트%_덱:24", 82100
SETVAR @"%듀얼리스트%_덱:25", 82100
SETVAR @"%듀얼리스트%_덱:26", 82100
SETVAR @"%듀얼리스트%_덱:27", 82101
SETVAR @"%듀얼리스트%_덱:28", 82101
SETVAR @"%듀얼리스트%_덱:29", 82101





SETVAR @"%듀얼리스트%_EX덱:0", 42100
SETVAR @"%듀얼리스트%_EX덱:1", 42100
SETVAR @"%듀얼리스트%_EX덱:2", 42100
SETVAR @"%듀얼리스트%_EX덱:3", 42101
SETVAR @"%듀얼리스트%_EX덱:4", 42101
SETVAR @"%듀얼리스트%_EX덱:5", 42101
SETVAR @"%듀얼리스트%_EX덱:6", 42102
SETVAR @"%듀얼리스트%_EX덱:7", 42102
SETVAR @"%듀얼리스트%_EX덱:8", 42102
SETVAR @"%듀얼리스트%_EX덱:9", 42103
SETVAR @"%듀얼리스트%_EX덱:10", 42103
SETVAR @"%듀얼리스트%_EX덱:11", 42103
SETVAR @"%듀얼리스트%_EX덱:12", 42105
SETVAR @"%듀얼리스트%_EX덱:13", 42105
SETVAR @"%듀얼리스트%_EX덱:14", 42105




;이벤트用の엑소시스터・クライム
@CARDNAME_279781,参照先
;ココで지정カードの名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = 엑소시스터・クライム
	CASE "略称"
		RESULTS = EXS・クライム
	CASE "カテゴリ"
		RESULTS:0 = 엑소시스터
		RESULTS:1 = 크라이시스터
		RESULTS:2 = E.R.A
ENDSELECT


@CARD_279781(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "종류"
		RETURN 速攻마법
ENDSELECT

RETURN 0

@CARD_EXPLANATION_279781(종류)
#DIM DYNAMIC 종류

CALL TEXT_DECORATION("ROGUE")
PRINTL このカード名의 효과는 １턴에 １번밖에 발동할 수 없다。
PRINTL ①：자신 / 상대의 メインフェイズに８００LP를 지불하고 발동할 수 있다。
PRINTL 덱에서 「엑소시스터・マルファ" 이외의 「엑소시스터」 또는 「크라이시스터」몬스터 １장을 특수  소환한다。
PRINTL 이 효과로 특수 소환한다モンスターが「엑소시스터」였을 경우、그 몬스터를 「크라이시스터」に書き換える。
PRINTL 이 카드는 효과발동 후、패로 돌아간다。
CALL TEXT_DECORATION("ROGUE")

@CARDCAN_279781(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 条件달성
#DIMS DYNAMIC 対面者

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

CALL CARD_NEGATE(듀얼리스트,종류,ゾーン,場所,279781)
SIF RESULT == 1
	RETURN 0

IF 종류 == 마함起動 || 종류 == 손패起動 || 종류 == フリー誘発
	IF ゾーン == "손패"
		SIF ターンプレイヤー != 듀얼리스트
			RETURN 0
	ELSEIF ゾーン == "마함"
		SIF GETVAR(@"%듀얼리스트%_魔_表:場所") == 3
			RETURN 0
	ELSE
		RETURN 0
	ENDIF
	SIF 발동済_1(듀얼리스트,279781)
		RETURN 0
	SIF メインフェイズ != 1
		RETURN 0
	SIF GETVAR(@"ライフ_%듀얼리스트%") <= 800
		RETURN 0

	
	CALL FULLRESET
	효과範囲덱 = 1
	효과条件カテゴリ:0 = 엑소시스터
	효과条件カテゴリ:1 = 크라이시스터
	효과条件固名前 = 엑소시스터・マルファ
	효과条件종류 = モン全般
	효과条件소환可 = 1
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ENDIF

@CARDEFFECT_279781(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 選択カード_ID
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 조교대상

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%



IF 종류 == 마함起動 || 종류 == 손패起動 || 종류 == フリー誘発
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,279781,1)
	IF RESULT == 0
		CALL LIFE_CHANGE(듀얼리스트,"減少","コスト",800)
		CALL FULLRESET
		효과範囲덱 = 1
		효과条件カテゴリ:0 = 엑소시스터
		효과条件カテゴリ:1 = 크라이시스터
		효과条件固名前 = 엑소시스터・マルファ
		효과条件종류 = モン全般
		CALL CARD_CHOOSE_ADV(듀얼리스트,ゾーン,場所)
		選択カード = RESULT
		SIF 選択カード == 9999
			RETURN
		CALL CARD_SELECT(듀얼리스트,選択カード)
		選択カード = RESULT
		選択カード_ID = GETVAR(@"%듀얼리스트%_덱:選択カード")
		TRYCALLFORM CARDNAME_{選択カード_ID}, "カテゴリ"
		IF RESULTS == "엑소시스터"
			SELECTCASE 選択カード_ID
				CASE 2100
					SETVAR @"%듀얼리스트%_덱:選択カード", (39780)
					PRINTFORML
					SETCOLOR C_RED
					PRINTFORMW おや、エリスの様子が……？
					PRINTFORML
					PRINTFORMW 엑소시스터・エリスは크라이시스터・エリスに書き換わった！
					RESETCOLOR
					PRINTFORML
				CASE 2101
					SETVAR @"%듀얼리스트%_덱:選択カード", (39781)
					PRINTFORML
					SETCOLOR C_RED
					PRINTFORMW おや、ステラの様子が……？
					PRINTFORML
					PRINTFORMW 엑소시스터・ステラは크라이시스터・ステラに書き換わった！
					RESETCOLOR
					PRINTFORML
				CASE 2102
					SETVAR @"%듀얼리스트%_덱:選択カード", (39782)
					PRINTFORML
					SETCOLOR C_RED
					PRINTFORMW おや、ソフィアの様子が……？
					PRINTFORML
					PRINTFORMW 엑소시스터・ソフィアは크라이시스터・ソフィアに書き換わった！
					RESETCOLOR
					PRINTFORML
				CASE 2103
					SETVAR @"%듀얼리스트%_덱:選択カード", (39783)
					PRINTFORML
					SETCOLOR C_RED
					PRINTFORMW おや、イレーヌの様子が……？
					PRINTFORML
					PRINTFORMW 엑소시스터・イレーヌは크라이시스터・イレーヌに書き換わった！
					RESETCOLOR
					PRINTFORML
			ENDSELECT
		ENDIF
		CALL CARD_SP_SUMMON(듀얼리스트,"덱",選択カード,"守備표시")
		IF 종류 == 마함起動
			CALL FULLRESET
			CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所,손패行き)
		ENDIF
	ENDIF
ENDIF



