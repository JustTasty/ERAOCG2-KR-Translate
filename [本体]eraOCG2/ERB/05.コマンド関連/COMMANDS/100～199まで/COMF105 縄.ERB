;-------------------------------------------------
;밧줄
;SM계커맨드、レベル3
;-------------------------------------------------
@COM105
;着脱の処理

TEQUIP:밧줄 = !TEQUIP:밧줄
;-------------------------------------------------
;ソース추가処理
;-------------------------------------------------
;消費체력、기력
DOWNBASE:체력 += 30
DOWNBASE:기력 += 120

CALL SOURCE_CALC_고통(TARGET, MASTER, 200)
CALL SOURCE_CALC_구속(TARGET, MASTER, 400)

;-------------------------------------------------
;특수ソース処理
;-------------------------------------------------
;긴박경험が高いと消費減少
IF EXP:구속경험 < EXPLV:3
	TIMES DOWNBASE:체력 , 1.00
	TIMES DOWNBASE:기력 , 1.00
ELSEIF EXP:구속경험 < EXPLV:4
	TIMES DOWNBASE:체력 , 0.90
	TIMES DOWNBASE:기력 , 0.90
ELSE
	TIMES DOWNBASE:체력 , 0.70
	TIMES DOWNBASE:기력 , 0.70
ENDIF

;-------------------------------------------------
;경험の処理
;-------------------------------------------------
EXP:구속경험 += 5
;同性愛　레즈なら戻り値1게이なら戻り値2
IF HETEROSEX(TARGET,MASTER)
	EXP:(50 + HETEROSEX(TARGET,MASTER)) += 1
	EXP:MASTER:(50 + HETEROSEX(TARGET,MASTER)) += 1
ENDIF


RETURN 1
;-------------------------------------------------
;装着계속の処理
;-------------------------------------------------
@EQUIP_COM105(ARG)
PRINTL ＜긴박중＞
;-------------------------------------------------
;ソース추가処理
;-------------------------------------------------
;消費체력、기력
DOWNBASE:ARG:체력 += 15

CALL SOURCE_CALC_고통(ARG, MASTER, 100)
CALL SOURCE_CALC_구속(ARG, MASTER, 200)
;-------------------------------------------------
;특수ソース処理
;-------------------------------------------------
;긴박경험が高いと消費減少
LOCAL = 60
IF EXP:ARG:구속경험 < EXPLV:3
	TIMES LOCAL , 1.00
ELSEIF EXP:ARG:구속경험 < EXPLV:4
	TIMES LOCAL , 0.90
ELSE
	TIMES LOCAL , 0.70
ENDIF
DOWNBASE:ARG:기력 += LOCAL


;-------------------------------------------------
;경험の処理
;-------------------------------------------------
EXP:ARG:구속경험 ++

RETURN 1

;-------------------------------------------------
;実行판정
;-------------------------------------------------
@COM_ABLE105
;밧줄実行판정
SIF !TFLAG:100
	RETURN 0
;一括관리
SIF GLOBAL_COMABLE(105)
	RETURN RESULT
;解除はいつでも可能
SIF TEQUIP:밧줄
	RETURN 1
;아이템を持っているか、아이템なし설정で無いとダメ
SIF ITEM:16 == 0 && NOITEM == 0
	RETURN 0
;조교者の기교が1無いとできない
SIF ABL:MASTER:기교 < 1
	RETURN 0

RETURN 1