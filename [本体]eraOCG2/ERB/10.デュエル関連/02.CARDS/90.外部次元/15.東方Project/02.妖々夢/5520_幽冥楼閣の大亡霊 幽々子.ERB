@CARDNAME_5520,参照先
;ココで指定カードの名前、略称を返す予定
#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = 저승누각의 대망령 유유코
	CASE "略称"
		RESULTS = 사이교우지 유유코
	CASE "カテゴリ"
		RESULTS:0 = 백옥루
		RESULTS:1 = 환상소녀
		RESULTS:4 = 동방 Project
ENDSELECT


@CARD_5520(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "外部者"
		RETURN 1
	CASE "種類"
		RETURN シンクロ
	CASE "属性"
		RETURN 風属性
	CASE "種族"
		RETURN アンデット族
	CASE "レベル"
		RETURN 8
	CASE "攻撃力"
		RETURN 2800
	CASE "守備力"
		RETURN 1800
	CASE "性別"
		RETURN 牝性
	CASE "追加日"
		RETURN 250808
ENDSELECT

RETURN 0

@CARD_EXPLANATION_5520(種類)
#DIM DYNAMIC 種類

PRINTL アンデット族チューナー＋チューナー以外のモンスター１体以上
PRINTL このカード名の①②の効果はそれぞれ１ターンに１度しか使用できない。
;死者を操る能力
CALLFORM CARD_ABLE(1,EX召喚時)
PRINTL ①：このカードがS召喚した場合に発動できる。
PRINTL お互いのデッキの上から３枚墓地に送る。
PRINTL その後、お互いの除外状態のモンスターすべて墓地へ送る。
;死者を使役する効果
CALLFORM CARD_ABLE(2,戦場起動)
PRINTL ②：自分メインフェイズに発動できる。
PRINTL 墓地にアンデット族モンスターが存在するプレイヤーの数だけデッキから「백옥루」カードを手札に加える。
PRINTL （同名カードは１枚まで）
;お化けらしい一面
CALLFORM CARD_ABLE(0,永続効果)
PRINTL ③：お互いに墓地のモンスターの効果を発動できない。

@CARDSUMMON_5520(決闘者,召喚カード,EX参照)
#DIMS DYNAMIC 決闘者
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 召喚カード
#DIM DYNAMIC EX参照
;素材条件

CALL RESETCONDITION_MAT
必要レベル数 = 8

;1体目の条件
IF EX参照 == 0 || EX参照 == 1
	素材条件チューナー = 1
	素材条件種族 = アンデット族
ELSEIF EX参照 >= 10
	素材条件チューナー = 0
ENDIF

IF EX参照 == 1
	CALL SYNCAN(決闘者,召喚カード,5520) 
	RETURN RESULT
ENDIF

@CARDCAN_5520(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所

CALL CARD_NEGATE(決闘者,種類,ゾーン,場所,5520)
SIF RESULT == 1
	RETURN 0

IF 種類 == EX召喚時
	SIF 発動済_1(決闘者,5520)
		RETURN 0
	CALL FULLRESET
	効果範囲デッキ = 1
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)

	RETURN 1
ELSEIF 種類 == 戦場起動
	SIF 発動済_2(決闘者,5520)
		RETURN 0
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 決闘者
		RETURN 0

	CALL FULLRESET
	効果範囲墓地 = 1
	効果範囲相手墓地 = 1
	効果条件種族 = アンデット族
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0

	CALL FULLRESET
	効果範囲戦場 = 1
	効果条件カテゴリ = 백옥루
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 種類 == 永続効果
	SIF ゾーン != "戦場"
		RETURN 0
	RETURN 1
ENDIF


@CARDEFFECT_5520(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 攻撃力修正
#DIM DYNAMIC 条件達成

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

IF 種類 == EX召喚時
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,5520,1)
	IF RESULT == 0
		CALL CARD_DECK_DISPOSE(決闘者,"デッキ",3)
		CALL CARD_DECK_DISPOSE(決闘者,"デッキ",3,0,1)

		FOR カウンタ, 98, -1, -1
			SIF GETVAR(@"%決闘者%_除外:カウンタ") == -1
				CONTINUE
			TRYCALLFORM CARD_{GETVAR(@"%決闘者%_除外:カウンタ")}, "種類"
			SIF RESULT > 10
				CONTINUE
			CALL CARD_DISPOSE(決闘者,"除外",カウンタ)
		NEXT

		FOR カウンタ, 98, -1, -1
			SIF GETVAR(@"%対面者%_除外:カウンタ") == -1
				CONTINUE
			TRYCALLFORM CARD_{GETVAR(@"%対面者%_除外:カウンタ")}, "種類"
			SIF RESULT > 10
				CONTINUE
			CALL CARD_DISPOSE(対面者,"除外",カウンタ)
		NEXT
	ENDIF
ELSEIF 種類 == 戦場起動
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,5520,2)
	IF RESULT == 0
		CALL FULLRESET
		効果範囲墓地 = 1
		効果条件種族 = アンデット族
		CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
		SIF RESULT == 1
			条件達成 += 1

		CALL FULLRESET
		効果範囲相手墓地 = 1
		効果条件種族 = アンデット族
		CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
		SIF RESULT == 1
			条件達成 += 1

		CALL FULLRESET
		効果範囲デッキ = 1
		効果条件カテゴリ = 백옥루
		効果条件複数 = 100 - 条件達成
		効果条件固名前選択 = 1
		CALL CARD_ADD_ADV(決闘者,ゾーン,場所)
	ENDIF
ELSEIF 種類 == 永続効果
	CALL SET_PLAYER_INFO(決闘者,"墓地_モン無効",3,2)
ENDIF

;――――――――――――――――――――――――――――――――――――――――――――――――――――――――――



@CARDNAME_105520,参照先
;ココで指定カードの名前、略称を返す予定
#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = 사이교우아야카시와 공주의 망해
	CASE "略称"
		RESULTS = 서행가성의 영애
	CASE "カテゴリ"
		RESULTS:0 = 백옥루
		RESULTS:1 = 이변
		RESULTS:4 = 동방 Project
ENDSELECT


@CARD_105520(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "外部者"
		RETURN 1
	CASE "トークン"
		RETURN 1
	CASE "種類"
		RETURN シンクロ
	CASE "属性"
		RETURN 風属性
	CASE "種族"
		RETURN 魔法使い族
	CASE "レベル"
		RETURN 8
	CASE "攻撃力"
		RETURN 0
	CASE "守備力"
		RETURN 0
	CASE "性別"
		RETURN 牝性
ENDSELECT

RETURN 0

@CARD_EXPLANATION_105520(種類)
#DIM DYNAMIC 種類

PRINTL このカード名の①の効果は１ターンに１度しか使用できない。
;死者を操る能力
CALLFORM CARD_ABLE(1,EX召喚時)
PRINTL ①：お互いのターンに発動できる。相手フィールドのカード１枚を破壊する。
PRINTL こうして破壊したカードがモンスターである場合、相手の墓地から同名モンスターを選び、
PRINTL アンデット族モンスターとして自分フィールドに特殊召喚する。
CALLFORM CARD_ABLE(0,効果後強制誘発)
PRINTL ②：相手がカードの効果を発動する度、相手はデッキの上から２枚を墓地へ送る。
CALLFORM CARD_ABLE(0,永続効果)
PRINTL ③：このカードがフィールド・墓地に存在する限り、相手は墓地のカードの効果を発動できず、
PRINTL 相手のデッキが０枚である場合、相手はゲームに敗北する。


@CARDSUMMON_105520(決闘者,召喚カード,EX参照)
#DIMS DYNAMIC 決闘者
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 召喚カード
#DIM DYNAMIC EX参照
;素材条件

CALL RESETCONDITION_MAT
必要レベル数 = 8

;1体目の条件
IF EX参照 == 0 || EX参照 == 1
	素材条件チューナー = 1
	素材条件種族 = アンデット族
ELSEIF EX参照 >= 10
	素材条件チューナー = 0
ENDIF

IF EX参照 == 1
	CALL SYNCAN(決闘者,召喚カード,105520) 
	RETURN RESULT
ENDIF

@CARDCAN_105520(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所

CALL CARD_NEGATE(決闘者,種類,ゾーン,場所,105520)
SIF RESULT == 1
	RETURN 0

IF 種類 == 戦場起動 || 種類 == フリー誘発
	SIF 発動済_1(決闘者,105520)
		RETURN 0
	SIF ゾーン != "戦場"
		RETURN 0
	CALL FULLRESET
	効果範囲相手戦場 = 1
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 種類 == 効果後強制誘発
	SIF ゾーン != "戦場"
		RETURN 0
	CALL FULLRESET
	CALL CARD_CHECK_FIN_DATA(決闘者,"効果発動",1)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 種類 == 永続効果
	SIF !GROUPMATCH(ゾーン,"戦場","墓地")
		RETURN 0
	RETURN 1
ENDIF

@CARDEFFECT_105520(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC 対面者 
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 攻撃力修正
#DIM DYNAMIC 条件達成
#DIM DYNAMIC 選択カード_ID

#DIMS DYNAMIC 選択カード名

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

IF 種類 == 戦場起動 || 種類 == フリー誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,105520,1)
	IF RESULT == 0
		CALL FULLRESET
		効果範囲相手戦場 = 1
		効果範囲相手魔罠 = 1
		CALL CARD_REMOVAL_ADV(決闘者,"単体除去",場所,"墓地")
		IF RESULT == 1
			選択カード_ID = RESULT:2
			TRYCALLFORM CARD_{選択カード_ID}, "名前"
			選択カード名 = %RESULTS%

			CALL FULLRESET
			効果範囲相手墓地 = 1
			効果条件名前 = %選択カード名%
			CALL CARD_SP_SUMMON_ADV(決闘者,ゾーン,場所)
		ENDIF
	ENDIF
ELSEIF 種類 == 効果後強制誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,105520)
	IF RESULT == 0
		CALL CARD_DECK_DISPOSE(決闘者,"デッキ",2,0,1)
	ENDIF
ELSEIF 種類 == 永続効果
	CALL SET_PLAYER_INFO(決闘者,"墓地_モン無効",3,1)
	CALL FULLRESET
	効果範囲デッキ = 1
	CALL CARD_CHECK_ADV(対面者,種類,ゾーン,場所)
	IF RESULT <= 0

		SETCOLOR C_RED
		PRINTFORML >>——MESSAGE:——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————>>>
		PRINTL
		PRINTFORMW 「花の下で……
		PRINTFORMW 　　眠りましょう？」
		PRINTL
		CUSTOMDRAWLINE ―

		CALL SET_PLAYER_INFO(決闘者,"決闘敗北フラグ",4,1)
	ENDIF
ENDIF

