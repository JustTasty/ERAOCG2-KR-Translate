@CARDNAME_79893,参照先
;ココで指定カードの名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = ィークギア・プリズンキャッスル
	CASE "略称"
		RESULTS = 狂逝機械姦城
	CASE "カテゴリ"
		RESULTS:0 = 狂逝の機械
		RESULTS:1 = E.R.A
ENDSELECT


@CARD_79893(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "種類"
		RETURN 永続魔法
ENDSELECT

RETURN 0

@CARD_EXPLANATION_79893(種類)
#DIM DYNAMIC 種類

CALL TEXT_DECORATION("ROGUE")
PRINTL
PRINTL このカード名の①の効果は１ターンに１度しか使用できない。
CALLFORM CARD_ABLE(1,手札起動)
PRINTL ①：このカードの発動時の効果処理として、自分フィールドか自分・相手の墓地の牝性モンスター１体まで選び除外する。
PRINTL その後除外したモンスターのレベルと同じ数の個別カウンターをこのカードに置く。
CALLFORM CARD_ABLE(2,身代効果)
PRINTL ②：自分フィールドの「狂逝の機械」モンスターが戦闘・効果で破壊される場合、
PRINTL 代わりにこのカードの個別カウンターを１つ取り除くことができる。
CALLFORM CARD_ABLE(3,永続効果)
PRINTL ③：個別カウンターが８個以上乗ったこのカードが魔法＆罠ゾーンに存在する限り、
PRINTL 自分の「狂逝の機械」モンスターが戦闘を行う場合、相手はダメージステップ終了時まで相手はカードの効果を発動できない。
CALLFORM CARD_ABLE(4,効果後誘発)
PRINTL ④：自分のレベル８以上の「狂逝の機械」モンスターが召喚、特殊召喚された時、
PRINTL フィールド上の全ての性別を持つモンスターを発情させ、媚薬カウンターを１つ置き、このカードに個別カウンターを１つ置く。
PRINTL この効果で発情した「狂逝の機械」モンスターは必ず攻撃できる。
PRINTL
SETCOLOR C_RED
PRINTL ＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊ーー警告ーー＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊
CALLFORM CARD_ABLE(0,攻撃時誘発)
PRINTL ⑤：■のカードが場に存在する時、相手モンスターが攻撃した後に発動する。
PRINTL 機械城の様々な施設や狂逝の機械、更には罠が相手モンスターを責め犯す。
PRINTL ＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊ーー注意ーー＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊＊
PRINTL
RESETCOLOR
CALL TEXT_DECORATION("ROGUE")


@CARDCAN_79893(決闘者,種類,ゾーン,場所)

#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 調教対象
#DIM DYNAMIC 効果条件フラグ = 0


CALL CARD_NEGATE(決闘者,種類,ゾーン,場所,79893)
SIF RESULT == 1
	RETURN 0

IF 種類 == 魔罠起動 || 種類 == 手札起動
	IF 種類 == 魔罠起動
		SIF GETVAR(@"%決闘者%_魔_表:場所") == 1
			RETURN 0
	ENDIF
	SIF 発動済_1(決闘者,79893)
		RETURN 0
	SIF GETVAR(@"%決闘者%_除外NG置換") >= 1
		RETURN 0
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 決闘者
		RETURN 0
	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲墓地 = 1
	効果範囲相手墓地 = 1
	効果条件性別 = 牝性
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1

ELSEIF 種類 == 永続効果
	SIF ゾーン != "魔罠"
		RETURN 0
	;5以上で発動 = 5未満なら発動させない(RETURN 0)
	;あとこれはフィールド魔法 = 魔罠前提なのでMZ_個Ｃじゃなくて魔_個Ｃを参照する
	SIF GETVAR(@"%決闘者%_魔_個Ｃ:場所") < 8 
		RETURN 0
	RETURN 1
	
ELSEIF 種類 == 身代効果
	SIF ゾーン != "魔罠"
		RETURN 0
	SIF 破壊対象ゾーン != "戦場"
		RETURN 0
	SIF !GROUPMATCH(破壊種類,"効果","戦闘")
		RETURN 0
	TRYCALLFORM CARDNAME_{破壊対象ID}("カテゴリ")
	SIF !MATCH(RESULTS,"狂逝の機械")
		RETURN 0
	SIF GETVAR(@"%決闘者%_魔_個Ｃ:場所") < 1
		RETURN 0
	RETURN 1

ELSEIF 種類 == 効果後誘発
	SIF ゾーン != "魔罠"
		RETURN 0
    SIF GETVAR(@"%決闘者%_魔_表:場所") != 1
		RETURN 0
	CALL FULLRESET
	効果条件カテゴリ = 狂逝の機械
	CALL 効果条件レベル_ADV(8,"以上")
	CALL CARD_CHECK_FIN_DATA(決闘者,"召喚全般")
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 種類 == 攻撃時強制誘発
	SIF ゾーン != "魔罠"
		RETURN 0
	SIF ターンプレイヤー == 決闘者
		RETURN 0
	RETURN 1
ENDIF

@CARDEFFECT_79893(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 付与個数
#DIM DYNAMIC 調教対象
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 戦闘カードID
#DIM DYNAMIC 攻撃力上昇
#DIM DYNAMIC 選択結果
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 選択カードレベル

#DIM DYNAMIC 配置先

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

IF 種類 == 魔罠起動 && GETVAR(@"%決闘者%_魔_表:場所") == 1

ELSEIF 種類 == 魔罠起動 || 種類 == 手札起動
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,79893,1)
	IF RESULT == 0
		CALL CARD_DISPOSE(決闘者,ゾーン,場所,魔罠行き)
		CALL FULLRESET
		効果範囲戦場 = 1
		効果範囲墓地 = 1
		効果範囲相手墓地 = 1
		効果条件性別 = 牝性
		効果条件行先フラグ = 除外行き
		CALL CARD_ADD_GY_ADV(決闘者,ゾーン,場所)
		IF RESULT == 1
			TRYCALLFORM CARD_{RESULT:1},"レベル"
			選択カードレベル = RESULT
			CALL SET_FIELD_INFO(決闘者,"魔罠",場所,"個Ｃ",選択カードレベル)
		ENDIF
	ENDIF

ELSEIF 種類 == 永続効果
    効果範囲戦場 = 1
    効果条件種類 = モン全般
	効果条件カテゴリ = 狂逝の機械
	CALL STATCHANGE_EFFECT(決闘者,"戦場",場所,"戦阻")

ELSEIF 種類 == 身代効果
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,79742)
	IF RESULT == 0
		CALL SET_FIELD_INFO(決闘者,"魔罠",場所,"個Ｃ",-1)
		PRINTFORMW ィークギア・プリズンキャッスルの効果でカウンターを１つ取り除くことで破壊を防ぎました。
		RETURN 1
	ENDIF
	RETURN 0

ELSEIF 種類 == 効果後誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,79893,4)
	IF RESULT == 0
	
	FOR カウンタ,0,5
		SIF GETVAR(@"%決闘者%_戦場:カウンタ") == -1
			CONTINUE
		CALL SET_FIELD_INFO(決闘者,"戦場",カウンタ,"薬Ｃ",1)
	NEXT
	FOR カウンタ,0,5
		SIF GETVAR(@"%対面者%_戦場:カウンタ") == -1
			CONTINUE
		CALL SET_FIELD_INFO(対面者,"戦場",カウンタ,"薬Ｃ",1)
	NEXT
	CALL SET_FIELD_INFO(決闘者,"魔罠",場所,"個Ｃ",1)
		CALL FULLRESET
		効果条件性別 = 性別在
		CALL CARD_REMOVAL_BASIC(決闘者,"両戦場全体",場所,"発情",2)
		CALL FULLRESET
        効果範囲戦場 = 1
    	効果条件種類 = モン全般
		効果条件カテゴリ = 狂逝の機械
        CALL STATCHANGE_EFFECT(決闘者,"戦場",場所,"発情",100)
	ENDIF

ELSEIF 種類 == 攻撃時強制誘発
	IF 戦闘場所(決闘者,1) != 5
		CALL CARD_EROTICS_FIELD(決闘者,"戦場",戦闘場所(決闘者,1),1)
		IF RESULT != -1
			調教対象 = RESULT
		ENDIF
	ELSE
		CALL CARD_EROTICS(相手プレイヤー,決闘者)
		IF RESULT != -1
			調教対象 = RESULT
		ENDIF
	ENDIF

	IF 調教対象 > -1
		SELECTCASE RAND:3
		CASE 0
			PRINTFORML %CALLNAME:調教対象%の両足が機械の触手で絡めとられ、身動きが取れなくなり、
			CALL MADORGASM_MACHINE_VIOLATE_TXT(1,0)
			CALL MADORGASM_RAND_ROB_TXT(1,1)
		CASE 1
			PRINTFORML %CALLNAME:調教対象%に照準を向け、強制的に快楽を叩き込み絶頂させる光線が放たれる。%CALLNAME:調教対象%は
			PRINTFORML …それを受けた%CALLNAME:調教対象%は、
			CALL MADORGASM_MACHINE_VIOLATE_TXT(1,1)
			CALL MADORGASM_RAND_ROB_TXT(1,4)
		CASE 2
			PRINTFORML %CALLNAME:調教対象%は急に体の動きを止めてしまう。
			PRINTFORML そして、いつの間にか虚ろな瞳となっていた%CALLNAME:調教対象%は、
			CALL MADORGASM_MACHINE_VIOLATE_TXT(1,2)
			CALL MADORGASM_HYPNOSIS_OPERATION_TXT(1,0)
		ENDSELECT
		PRINTFORML ……
		PRINTFORML …………
		PRINTFORML ………………その後、%CALLNAME:調教対象%はなんとか罠から逃れる事ができた。
		PRINTFORML 狂逝の機械たちが動き回り、淫らな罠が動き続ける機械城、
		PRINTFORMW 充満する空気にすら媚毒が混ざっており、%CALLNAME:調教対象%はそれを無自覚に吸ってしまう…
		CALL EROTIC_MOVE("媚毒汚染",調教対象,-1,300)
	ENDIF
ENDIF




