@CALC_PROBABILITY_SYMMETRIA(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC 選択後メッセージ
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC ボーナス효과選択率
#DIM DYNAMIC 카운터数
#DIM DYNAMIC ボーナス효과
#DIM DYNAMIC 효과分岐
#DIM DYNAMIC 조교대상

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

ボーナス효과選択率 = 0
효과分岐 = 0
選択後メッセージ = 奉仕することを選んだ。

;場の카운터の数をチェック
CALL FULLRESET
효과範囲마함 = 1
효과条件カテゴリ = 타천칭
효과条件個Ｃ所持 = 1
효과条件CNT = 1
CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
카운터数 = RESULT:9
SIF 카운터数 >= 19
	카운터数 = 19
SIF 카운터数 >= 1
	카운터数+=1
;카운터数と상대のLPを元に確率を算出
;상대のLPが「服従の타천칭で与えるダメージ量+1200」以下の場合、わずかながらボーナス효과を選ばれる可能性がある。
;「服従の타천칭で与えるダメージ量+300」以下なら確実に選択される（即死が見えているため）。

SIF GETVAR(@"ライフ_%対面者%")  <= (카운터数*100)+1200
	ボーナス효과選択率 = 5
SIF GETVAR(@"ライフ_%対面者%")  <= (카운터数*100)+600
	ボーナス효과選択率 = 10
SIF GETVAR(@"ライフ_%対面者%")  <= (카운터数*100)+300
	ボーナス효과選択率 = 101
;使途が場に居るなら確実にボーナス효과が確定
CALL FULLRESET
효과範囲필드 = 1
효과条件名前 = 타천칭의 사도
CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
IF RESULT == 1
	ボーナス효과選択率 = 102
ENDIF

;ダイスを振って효과を確定させる
ボーナス효과 = RAND:99 + 1

[IF_DEBUG]
	PRINTFORMW 100面ダイス:{ボーナス효과}
	PRINTFORMW ボーナス효과選択率:{ボーナス효과選択率}
[ENDIF]

;分岐パターンは４つ
IF ボーナス효과選択率 >= ボーナス효과 && 100 >= ボーナス효과選択率
	;１つめ　確率によってボーナス효과が選ばれたパターン
	選択後メッセージ = 苦悶の表情で１つ目の효과を選択した。
	효과分岐 = 1
ELSEIF ボーナス효과選択率 == 101
	;２つめ　ダメージがギリギリなのでボーナス효과を選ぶしか無かった
	효과分岐 = 2
ELSEIF ボーナス효과選択率 == 102
	;３つめ　타천칭의 사도の효과で確実に효과が通る状況だった
	選択後メッセージ = 타천칭의 사도の存在によって完全に屈服している……
	효과分岐 = 3
ENDIF
;それ以外の状況の場合はダメージ효과が選択される

;選択に応じてメッセージを표시
PRINTFORMW %対面者%は%選択後メッセージ%

RETURN 효과分岐
;――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
; ダメージを与え카운터を置く효과の共通化処理
@CARD_DAMAGE_SYMMETRIA(듀얼리스트,종류,ゾーン,場所,ダメージ量)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC ダメージ量
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 조교대상

;ダメージを与える
CALL LIFE_CHANGE(듀얼리스트,"減少","효과",ダメージ量,1)

;快感ダメージも付与
CALL CARD_EROTICS(상대プレイヤー,듀얼리스트)
IF RESULT != -1
	조교대상 = RESULT
	PRINTFORML
	SETCOLOR C_PINK 
	PRINTFORML %CALLNAME:조교대상%はさらに快感ダメージを受けた！
	RESETCOLOR
	CALL EROTIC_MOVE("조교部屋",조교대상,,ダメージ量)
ENDIF

;카운터を置く
PRINTFORMW 「타천칭」カードに카운터を置いてください
CALL FULLRESET
효과条件カテゴリ = 타천칭
CALL CARD_CHOOSE_BASIC(듀얼리스트,"마함",ゾーン,場所)
選択カード = RESULT
SIF 選択カード != 9999
	CALL SET_FIELD_INFO(듀얼리스트,"마함",選択カード,"個Ｃ",1)

RETURN 0
;――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
; ダメージだけを与える효과
@CARD_DAMAGE_59904(듀얼리스트,종류,ゾーン,場所,ダメージ量)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC ダメージ量
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 조교대상

;ダメージを与える
CALL LIFE_CHANGE(듀얼리스트,"減少","효과",ダメージ量,1)

;快感ダメージも付与
CALL CARD_EROTICS(상대プレイヤー,듀얼리스트)
IF RESULT != -1
	조교대상 = RESULT
	PRINTFORML
	SETCOLOR C_PINK 
	PRINTFORML %CALLNAME:조교대상%はさらに快感ダメージを受けた！
	RESETCOLOR
	CALL EROTIC_MOVE("조교部屋",조교대상,,ダメージ量)
ENDIF

RETURN 0
;――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
; 駄天秤によるセクハラ효과（本番無し）
@CARD_HOSTAGE_FORT_59904(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 조교대상

CALL FULLRESET
효과範囲필드 = 1
효과範囲마함 = 1
효과条件名前 = Symスレイヴ
효과条件종류 = モン全般
효과条件CNT = 1
CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
SIF RESULT >= 1
	PRINTFORMW 심메트리아達は%CALLNAME:MASTER%に捕えた女たちで遊ぶ事を提案した。

CALL FULLRESET
FOR カウンタ,0,5
	SIF GETVAR(@"%듀얼리스트%_마함:カウンタ") == -1
		CONTINUE
	SIF GETVAR(@"%듀얼리스트%_魔_リ数:カウンタ") >= 10
		CONTINUE
	CALL CARD_EROTICS_FIELD(듀얼리스트,"마함",カウンタ)
	IF RESULT != -1
		조교대상 = RESULT
		SELECTCASE RAND:5
			CASE 0
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%の唇をこじ開けて舌を絡めた。
				CALL EROTIC_MOVE("ディープキス",조교대상,-1,500)
			CASE 1
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%の全身をいやらしく撫でまわした。
				CALL EROTIC_MOVE("全身愛撫",조교대상,-1,500)
			CASE 2
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%に口で자신を満足させるよう命令した。
				CALL EROTIC_MOVE("フェラチオ",조교대상,-1,500)
			CASE 3
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%に胸で奉仕するよう命令した。
				CALL EROTIC_MOVE("パイズリ",조교대상,-1,500)
			CASE 4
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%を晒しものにしている。
				CALL EROTIC_MOVE("晒しもの",조교대상,-1,500)
		ENDSELECT
		CALL SET_FIELD_INFO(듀얼리스트,"마함",カウンタ,"リ数",1)
	ENDIF
NEXT

RETURN 0

;――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
; 駄天秤によるセクハラ효과（本番あり）
@CARD_HOSTAGE_MONSTER_59904(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 조교대상

CALL FULLRESET
효과範囲필드 = 1
효과範囲마함 = 1
효과条件名前 = Symスレイヴ
효과条件종류 = モン全般
효과条件CNT = 1
CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
SIF RESULT >= 1
	PRINTFORMW 심메트리아達は%CALLNAME:MASTER%に捕えた女たちで遊ぶ事を提案した。

CALL FULLRESET
FOR カウンタ,0,5
	SIF GETVAR(@"%듀얼리스트%_마함:カウンタ") == -1
		CONTINUE
	SIF GETVAR(@"%듀얼리스트%_魔_リ数:カウンタ") >= 10
		CONTINUE
	CALL CARD_EROTICS_FIELD(듀얼리스트,"마함",カウンタ)
	IF RESULT != -1
		조교대상 = RESULT
		SELECTCASE RAND:4
			CASE 0
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%に騎乗位で奉仕するよう命令した。
				CALL EROTIC_MOVE("騎乗位",조교대상,-1,500)
			CASE 1
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%を激しく犯している。
				CALL EROTIC_MOVE("前穴凌辱",조교대상,-1,500)
			CASE 2
				PRINTFORMW %CALLNAME:MASTER%は%CALLNAME:조교대상%の後ろの穴を激しく犯している。
				CALL EROTIC_MOVE("後穴凌辱",조교대상,-1,500)
			CASE 3
				PRINTFORMW %CALLNAME:MASTER%は심메트리아達と一緒に%CALLNAME:조교대상%を輪姦した。
				CALL EROTIC_MOVE("全身凌辱",조교대상,-1,500)
		ENDSELECT
		CALL SET_FIELD_INFO(듀얼리스트,"마함",カウンタ,"リ数",1)
	ENDIF
NEXT

RETURN 0

;――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
; 카운터だけを乗せる효과
@CARD_COUNTER_SYMMETRIA(듀얼리스트,종류,ゾーン,場所,카운터個数)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC 카운터個数
#DIM DYNAMIC 選択カード

;카운터を置く
PRINTFORMW 「타천칭」カードに카운터を置いてください
CALL FULLRESET
효과条件カテゴリ = 타천칭
CALL CARD_CHOOSE_BASIC(듀얼리스트,"마함",ゾーン,場所)
選択カード = RESULT
SIF 選択カード != 9999
	CALL SET_FIELD_INFO(듀얼리스트,"마함",選択カード,"個Ｃ",카운터個数)

RETURN 0