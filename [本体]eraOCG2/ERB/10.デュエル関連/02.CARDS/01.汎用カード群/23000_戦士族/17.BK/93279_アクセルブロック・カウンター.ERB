@CARDNAME_93279,参照先
;ココで지정カードの名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = 액셀블록 카운터
	CASE "略称"
		RESULTS = AB카운터
	CASE "カテゴリ"
		RESULTS:0 = 카운터
		RESULTS:1 = 게임 오리지널
ENDSELECT


@CARD_93279(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "종류"
		RETURN 通常함정
	CASE "추가日"
		RETURN 250707
ENDSELECT

RETURN 0

@CARD_EXPLANATION_93279(종류)
#DIM DYNAMIC 종류

PRINTL このカードは자신の「ＢＫ」モンスターのＸ素材を１つ取り除き、セットしたターンに발동する事もできる。
PRINTL このカード名の②の효과は１ターンに１度しか使用できない。
CALLFORM CARD_ABLE(1,발동誘発)
PRINTL ①：자신フィールドに「ＢＫ」モンスターが存在し、상대が마법・함정カードを발동した場合に발동できる。その발동を無効にし破壊する。
PRINTL この효과で通常함정カードの발동を無効にした場合、破壊する代わりにそのカードを자신フィールドにセットできる。
CALLFORM CARD_ABLE(2,손패→묘지 ,덱→묘지)
PRINTL ②：このカードが손패・덱から묘지へ送られた場合に발동できる。
PRINTL 덱から「ＢＫ」モンスター１体を묘지へ送る。

@CARDCAN_93279(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIMS DYNAMIC 対面者

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

CALL CARD_NEGATE(듀얼리스트,종류,ゾーン,場所,93279)
SIF RESULT == 1
	RETURN 0

IF 종류 == 발동誘発
	SIF ゾーン != "마함"
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_魔_表:場所") == 1
		RETURN 0
	CALL FULLRESET
	효과範囲필드 = 1
	효과条件カテゴリ = BK
	효과条件Ｘ素所持 = 999
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF GETVAR(@"%듀얼리스트%_魔_表:場所") == 3 && RESULT != 1
		RETURN 0
	CALL FULLRESET
	효과範囲필드 = 1
	효과条件カテゴリ = BK
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	CALL FULLRESET
	효과条件종류 = 마함全般
	CALL CARD_CHECK_START_DATA(듀얼리스트,1)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 손패→묘지 || 종류 == 덱→묘지
	SIF 발동済_2(듀얼리스트,93279)
		RETURN 0
	CALL FULLRESET
	효과範囲덱 = 1
	효과条件カテゴリ = BK
	효과条件종류 = モン全般
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ENDIF

@CARDEFFECT_93279(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC 특수발동
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 選択カード_ID
#DIMS DYNAMIC 選択カード名前
#DIM DYNAMIC 条件달성

#DIM DYNAMIC カウンタ
#DIMS DYNAMIC 対面者

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

IF 종류 == 발동誘発 
	;参考：マリス
	SIF GETVAR(@"%듀얼리스트%_魔_表:場所") == 3
		특수발동 = 1
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,93279,1)
	IF RESULT == 0
		CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所)
		PRINTFORMW {특수발동}
		IF 특수발동 == 1
			PRINTL 素材を取り除くモンスターを選んでください。
			CALL FULLRESET
			효과範囲필드 = 1
			효과条件カテゴリ = BK
			효과条件Ｘ素所持 = 999
			CALL CARD_CHOOSE_ADV(듀얼리스트,ゾーン,場所)
			選択カード = RESULT
			選択カード_ID = RESULT:99
			SIF 選択カード == 9999
				RETURN 0
			CALL CARD_SELECT(듀얼리스트,選択カード)
			選択カード = RESULT
			CALL SET_FIELD_INFO(대상者（CS）,"필드",選択カード（CS）,"Ｘ",-1)
			TRYCALLFORM CARDNAME_{選択カード_ID}, "名前"
			IF RESULTS == "BK 구속만병 리드블로"
				PRINTL 
				SETCOLOR C_YELLOW
				PRINTL 리드블로の구속が解かれた！
				RESETCOLOR
				PRINTL 
				CALL SET_FIELD_INFO(듀얼리스트,"필드",選択カード（CS）,"永攻",800)
			ENDIF
		ENDIF
		;無効にする前にカードIDを取る
		CALL FULLRESET
		효과条件종류 = 마함全般
		CALL CARD_CHECK_START_DATA(듀얼리스트,1)
		
		選択カード_ID = 効後_효과ID:(処理中番号 - 1)
		TRYCALLFORM CARD_{選択カード_ID},"종류"
		IF RESULT == 通常함정
			条件달성 = 1
			選択カード = 効後_設場所:(処理中番号 - 1) 
			TRYCALLFORM CARDNAME_{選択カード_ID},"名前"
			選択カード名前 = %RESULTS%

		ENDIF
		CALL CARD_REMOVAL_BASIC(듀얼리스트,"발동無効",場所,"묘지")

		;발동条件満たしてるかチェック
		CALL FULLRESET
		효과範囲상대묘지 = 1
		효과条件종류 = 通常함정
		효과条件名前 = %選択カード名前%
		CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
		SIF 条件달성 != 1 && RESULT != 1
			RETURN 1
		;자신が使う場合だけ選択肢
		IF 듀얼리스트 == "자신"
			PRINTL 無効にしたカードを자신の場にセットしますか？
			CALL YN_CHOICE(듀얼리스트)
			SIF RESULT == いいえ
				RETURN 1
		ENDIF
		CALL FULLRESET
		CALL CARD_ADD(듀얼리스트,"상대마함","마함",選択カード,"裏側표시")
	ENDIF
	RETURN 0
ELSEIF 종류 == 손패→묘지 || 종류 == 덱→묘지
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,93279,2)
	IF RESULT == 0
		CALL FULLRESET
		효과範囲덱 = 1
		효과条件カテゴリ = BK
		효과条件종류 = モン全般
		CALL CARD_ADD_GY_ADV(듀얼리스트,ゾーン,場所)
	ENDIF
ENDIF

